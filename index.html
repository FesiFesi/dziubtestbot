

<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="menu.mainTitle">FEED & FLAP</title>
  
    <style>
    /* Dodatkowe style, aby upewnić się, że przełączanie ekranów działa */
    .game-screen {
        display: none !important;
    }
    .game-screen.active {
        display: block !important;
    }


  
    

    #breeding-screen {
    background-color: #8FBC8F;
    background-image: url('assets/images/breeding-bg.jpg');
    background-size: cover;
    background-position: center;
    padding: 15px;
    overflow-y: auto;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}


#main-screen {
    background-image: url('assets/images/main-bg.jpg');
    background-size: cover;
    background-position: center;
    padding: 15px;
    overflow-y: auto;
    width: 100%;
    height: 100vh;
    position: relative;
    top: 0;
    left: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Style dla pasków statystyk */
.stat-progress {
    transition: width 0.3s ease-in-out;
    border-radius: 7px;
}

/* Kolory dla parametrów */
#hunger-bar.green, #happiness-bar.green, #cleanliness-bar.green {
    background-color: #4CAF50 !important;
}

#hunger-bar.orange, #happiness-bar.orange, #cleanliness-bar.orange {
    background-color: #FF9800 !important;
}

#hunger-bar.red, #happiness-bar.red, #cleanliness-bar.red {
    background-color: #F44336 !important;
}

/* Fioletowy progress bar dla doświadczenia */
#experience-bar {
    background-color: #9C27B0 !important;
    transition: width 0.3s ease-in-out;
}

/* Style dla tekstów statystyk */
.pet-stat > span {
    color: #000000;
    font-weight: bold;
}

.pet-stat:last-child > span {
    color: #9C27B0;
    font-weight: bold;
}

/* Style dla przycisków */
#feed-pet-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    margin: 0 5px;
    font-size: 16px;
    cursor: pointer;
    font-weight: bold;
}

#play-pet-button,
#clean-pet-button {
    background-color: #cccccc;
    color: #666666;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    margin: 0 5px;
    font-size: 16px;
    cursor: not-allowed;
    font-weight: bold;
    opacity: 0.7;
}

#hatch-pet-button,
#expeditions-button {
    background-color: #9C27B0;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 15px 30px;
    font-size: 18px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 15px;
}

#expeditions-button.locked {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    opacity: 0.7;
}









/* Style dla segmentów ekspedycji */
.expedition-item {
    display: flex;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    margin-bottom: 15px;
    border: 1px solid #e0e0e0;
    transition: transform 0.2s, box-shadow 0.2s;
}

.expedition-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
}

.start-expedition-button {
    transition: background-color 0.2s;
}

.start-expedition-button:hover {
    background-color: #7B1FA2;
}

.start-expedition-button:active {
    background-color: #6A1B9A;
    transform: scale(0.98);
}


   
   /* Style dla nagród ekspedycji */
.expedition-rewards {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 5px;
}

.expedition-reward {
    display: flex;
    align-items: center;
    padding: 3px 6px;
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 12px;
    transition: transform 0.2s;
}

.expedition-reward:hover {
    transform: scale(1.05);
}

.expedition-reward-chance {
    opacity: 0.75;
    border: 1px dashed rgba(0, 0, 0, 0.2);
}

.expedition-reward-guaranteed {
    border: 1px solid rgba(0, 0, 0, 0.1);
}










/* Animacje dla dystansu w przepustce */
@keyframes fadeInOut {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
    40% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
}

@keyframes zoomFadeIn {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
    30% { transform: translate(-50%, -50%) scale(1); }
    80% { opacity: 1; }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
}

@keyframes birdFly {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-15px) scale(1.1); }
    100% { transform: translateY(0) scale(1); }
}


/* Naprawione style dla okna przyjaciół */
#friends-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    overflow-y: auto;
}

#friends-modal .friends-content {
    background-color: white;
    border-radius: 15px;
    padding: 0;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    position: relative;
    margin: 30px auto;
}

#friends-modal .friends-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    position: sticky;
    top: 0;
    background-color: white;
    border-radius: 15px 15px 0 0;
    z-index: 10;
    border-bottom: 1px solid #eee;
}

#friends-modal .friends-body {
    padding: 0;
    max-height: calc(90vh - 60px);
    overflow-y: auto;
}

/* Scrollbar dla okna przyjaciół */
#friends-modal .friends-body::-webkit-scrollbar {
    width: 8px;
}

#friends-modal .friends-body::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

#friends-modal .friends-body::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 10px;
}

#friends-modal .friends-body::-webkit-scrollbar-thumb:hover {
    background: #555;
}














/* Style dla nieodkrytych ptaków */
.catalog-bird-item.bird-undiscovered .catalog-bird-name {
    display: none !important;
}

.catalog-bird-item.bird-undiscovered .catalog-bird-name-undiscovered {
    display: block !important;
    color: #666;
    font-style: italic;
    opacity: 0.8;
}

.catalog-bird-item:not(.bird-undiscovered) .catalog-bird-name {
    display: block !important;
}

.catalog-bird-item:not(.bird-undiscovered) .catalog-bird-name-undiscovered {
    display: none !important;
}

/* Dodatkowe style dla lepszego wyglądu */
.catalog-bird-name-undiscovered {
    font-weight: bold;
    color: #999;
    text-align: center;
    padding: 5px 0;
}












    </style>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  

    <!-- Preload ptasich obrazków -->
<link rel="preload" href="./assets/images/common-bird.png" as="image">
<link rel="preload" href="./assets/images/rare-bird.png" as="image">
<link rel="preload" href="./assets/images/epic-bird.png" as="image">
<link rel="preload" href="./assets/images/legendary-bird.png" as="image">
<link rel="preload" href="./assets/images/mythical-bird.png" as="image">

<!-- Preload obrazów z jeziora -->
<link rel="preload" href="./assets/images/lake-common.png" as="image">
<link rel="preload" href="./assets/images/lake-rare.png" as="image">
<link rel="preload" href="./assets/images/lake-epic.png" as="image">
<link rel="preload" href="./assets/images/lake-legendary.png" as="image">
<link rel="preload" href="./assets/images/lake-mythical.png" as="image">

<!-- Preload obrazków hodowli -->
<link rel="preload" href="./assets/images/bird-egg.png" as="image">
<link rel="preload" href="./assets/images/bird-chick.png" as="image">
<link rel="preload" href="./assets/images/bird-young.png" as="image">
<link rel="preload" href="./assets/images/bird-adult.png" as="image">




</head>
<body>





    
    <div id="game-container">
        <!-- Pasek zasobów na górze -->
        <div id="resource-bar">
      
          

<div class="resource">
    <img src="assets/images/seed-icon.png" alt="Ziarenka" class="resource-icon" data-i18n-alt="resources.seedsIcon">
    <span id="seed-count">10</span>
</div>
<div class="resource">
    <img src="assets/images/coin-icon.png" alt="DziubCoiny" class="resource-icon" data-i18n-alt="resources.coinsIcon">
    <span id="coin-count">0</span>
</div>
<div class="resource">
    <div class="fruit-icon resource-icon">
        <img src="assets/images/fruit-icon.png" alt="Fruit Icon" data-i18n-alt="resources.fruitsIcon" />
    </div>
    <span id="fruit-count">0</span>
</div>
<div class="resource">
    <img src="assets/images/tonicon.png" alt="TON" class="resource-icon" data-i18n-alt="resources.tonIcon">
    <span id="ton-count">0,000</span>
</div>


        </div>

     
       <div id="main-screen" class="game-screen active">


            <div id="game-title">


<!-- Przycisk ustawień -->
<div class="settings-button" style="position: fixed; top: 70px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/settings-icon.png" alt="Ustawienia" style="width: 69px; height: 69px;" data-i18n-alt="settings.title">
</div>




<!-- Okno ustawień (modal/pop-up) -->
<div id="settings-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 2000; justify-content: center; align-items: center;">
    <div class="settings-content" style="background-color: white; border-radius: 20px; padding: 0; width: 90%; max-width: 450px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); position: relative; overflow: hidden;">
        <!-- Nagłówek -->
        <div class="settings-header" style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: linear-gradient(135deg, #4fc3f7, #2196f3); margin-bottom: 0;">
            <h2 style="margin: 0; color: white; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); font-size: 24px;" data-i18n="settings.title">Ustawienia</h2>
            <div class="close-button" style="width: 36px; height: 36px; background-color: #ff5252; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; color: white; font-weight: bold; font-size: 20px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);">×</div>
        </div>
   
        <!-- Treść ustawień -->
        <div class="settings-body" style="padding: 20px;">
            <!-- Sekcja ustawień dźwięku -->
            <div class="sound-settings-container" style="background: #e3f2fd; border-radius: 15px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(33, 150, 243, 0.15);">
                <h3 style="color: #1565c0; margin-top: 0; font-size: 18px; text-align: center; margin-bottom: 15px; border-bottom: 2px solid rgba(33, 150, 243, 0.2); padding-bottom: 8px;" data-i18n="settings.soundSettings">Ustawienia dźwięku</h3>
                
                <!-- Przełącznik muzyki w tle - zachowanie oryginalnej struktury -->
                <div class="sound-setting-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: white; padding: 10px 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);">
                    <span class="sound-setting-label" style="font-weight: bold; color: #2196F3;" data-i18n="settings.backgroundMusic">Muzyka w tle</span>
                    <label class="sound-toggle-switch" style="position: relative; display: inline-block; width: 50px; height: 24px;">
                        <input type="checkbox" id="sound-music-toggle" checked>
                      <span class="sound-toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Suwak głośności muzyki w tle -->
                <div class="sound-setting-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: white; padding: 10px 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);">
                    <span class="sound-setting-label" style="font-weight: bold; color: #2196F3;" data-i18n="settings.musicVolume">Głośność muzyki</span>
                    <div style="display: flex; align-items: center; gap: 10px; width: 60%;">
                        <input type="range" min="0" max="100" value="30" class="sound-volume-slider" id="sound-music-volume" style="flex-grow: 1;">
                        <span class="sound-volume-value" id="sound-music-volume-value" style="font-weight: bold; color: #2196F3; min-width: 45px; text-align: right;">30%</span>
                    </div>
                </div>
                
                <hr class="sound-setting-divider" style="border: 0; height: 1px; background: rgba(33, 150, 243, 0.2); margin: 15px 0;">

                <!-- Przełącznik efektów dźwiękowych - zachowanie oryginalnej struktury -->
                <div class="sound-setting-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: white; padding: 10px 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);">
                    <span class="sound-setting-label" style="font-weight: bold; color: #2196F3;" data-i18n="settings.soundEffects">Efekty dźwiękowe</span>
                    <label class="sound-toggle-switch" style="position: relative; display: inline-block; width: 50px; height: 24px;">
                        <input type="checkbox" id="sound-effects-toggle" checked>
                       <span class="sound-toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Suwak głośności efektów dźwiękowych -->
                <div class="sound-setting-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; background: white; padding: 10px 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);">
                    <span class="sound-setting-label" style="font-weight: bold; color: #2196F3;" data-i18n="settings.effectsVolume">Głośność efektów</span>
                    <div style="display: flex; align-items: center; gap: 10px; width: 60%;">
                        <input type="range" min="0" max="100" value="70" class="sound-volume-slider" id="sound-effects-volume" style="flex-grow: 1;">
                        <span class="sound-volume-value" id="sound-effects-volume-value" style="font-weight: bold; color: #2196F3; min-width: 45px; text-align: right;">70%</span>
                    </div>
                </div>
            </div>

         
            


          
<!-- Sekcja wyboru języka -->
<div class="settings-section" style="margin-top: 20px; background: linear-gradient(135deg, #ffb347, #ffcc5c); border-radius: 15px; padding: 15px; box-shadow: 0 2px 8px rgba(255, 179, 71, 0.3);">
    <h3 style="margin-bottom: 15px; color: #e65100; text-align: center; font-size: 18px; border-bottom: 2px solid rgba(255, 255, 255, 0.4); padding-bottom: 8px;" data-i18n="settings.languageSettings">Ustawienia języka</h3>
    
    <div class="language-options" style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">



        <div class="language-option" style="text-align: center; cursor: pointer; background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.2s ease;">
            <div class="flag-container" style="width: 60px; height: 40px; margin-bottom: 5px; overflow: hidden; display: flex; justify-content: center; align-items: center; border-radius: 5px; border: 2px solid #ff9800;">
                <img src="assets/images/flag-pl.png" alt="Polski" style="max-width: 100%; max-height: 100%; object-fit: contain;">
            </div>
            <span style="font-size: 14px; font-weight: bold; color: #ff9800;">PL</span>
        </div>
        
        <div class="language-option" style="text-align: center; cursor: pointer; background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.2s ease;">
            <div class="flag-container" style="width: 60px; height: 40px; margin-bottom: 5px; overflow: hidden; display: flex; justify-content: center; align-items: center; border-radius: 5px;">
                <img src="assets/images/flag-en.png" alt="English" style="max-width: 100%; max-height: 100%; object-fit: contain;">
            </div>
            <span style="font-size: 14px; font-weight: bold; color: #757575;">EN</span>
        </div>
    </div>
</div>







            <!-- Sekcja linków prawnych -->
            <div class="legal-links" style="margin-top: 20px; border-top: 1px solid #e0e0e0; padding-top: 15px;">
                <h3 style="margin-bottom: 15px; color: #1565c0; text-align: center; font-size: 18px;" data-i18n="settings.legalInfo">Informacje prawne</h3>
                
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
                    <!-- Przyciski regulaminu i polityki prywatności -->
                    <a href="regulamin.html" target="_blank" style="
                        background: linear-gradient(135deg, #4fc3f7, #2196f3);
                        color: white;
                        padding: 12px 20px;
                        border-radius: 10px;
                        text-decoration: none;
                        font-weight: bold;
                        text-align: center;
                        box-shadow: 0 3px 8px rgba(33, 150, 243, 0.3);
                        transition: all 0.2s ease-in-out;
                        flex: 1;
                        max-width: 130px;
                        height: auto;
                        display: flex;
                        justify-content: center;
                        font-size: 13px;
                        align-items: center;"
                        data-i18n="settings.termsOfService">
                        Regulamin gry
                    </a>
                    
                    <a href="polityka-prywatnosci.html" target="_blank" style="
                        background: linear-gradient(135deg, #4fc3f7, #2196f3);
                        color: white;
                        padding: 12px 20px;
                        border-radius: 10px;
                        text-decoration: none;
                        font-weight: bold;
                        text-align: center;
                        box-shadow: 0 3px 8px rgba(33, 150, 243, 0.3);
                        transition: all 0.2s ease-in-out;
                        flex: 1;
                        max-width: 130px;
                        height: auto;
                        display: flex;
                        justify-content: center;
                        font-size: 13px;
                        align-items: center;"
                        data-i18n="settings.privacyPolicy">
                        Polityka Prywatności
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>







<!-- Przycisk przyjaciół -->
<div class="friends-button" style="position: fixed; top: 140px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/friends-icon.png" alt="Przyjaciele" style="width: 73px; height: 73px;" data-i18n-alt="friends.title">
</div>

<!-- Okno przyjaciół (modal/pop-up) -->
<div id="friends-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 2000; justify-content: center; align-items: center; overflow-y: auto;">
    <div class="friends-content" style="background-color: white; border-radius: 15px; padding: 0; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); position: relative; margin: 30px auto;">
        <div class="friends-header" style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; position: sticky; top: 0; background-color: white; border-radius: 15px 15px 0 0; z-index: 10; border-bottom: 1px solid #eee;">
            <h2 style="margin: 0; color: #3d29db;" data-i18n="friends.title">Przyjaciele</h2>
            <div class="close-button" style="width: 30px; height: 30px; background-color: #f44336; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; color: white; font-weight: bold;">×</div>
        </div>
        <div class="friends-body" style="padding: 0;">
            <p data-i18n="friends.comingSoon">Tu wkrótce pojawi się okno Przyjaciół</p>
        </div>
    </div>
</div>




<!-- Przycisk kalendarza -->
<div class="kalendarz-button" style="position: fixed; top: 210px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/kalendarz-icon.png" alt="Kalendarz" style="width: 46px; height: 46px;" data-i18n-alt="dailyRewards.title">
    <div class="reward-notification" style="position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; background-color: #F44336; border-radius: 50%; display: none; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: bold; border: 2px solid white;">!</div>
</div>











<!-- Okno nagród dziennych -->
<div id="kalendarz-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 2000; justify-content: center; align-items: center; overflow-y: auto;">
    <div class="kalendarz-content" style="background-color: white; border-radius: 20px; padding: 10px; width: 90%; max-width: 450px; position: relative; margin: 30px auto; max-height: 90vh; overflow-y: auto; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);">
        <div class="kalendarz-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 15px; border-radius: 15px 15px 0 0; background: linear-gradient(135deg, #4fc3f7, #2196f3); box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);">
            <h2 style="margin: 0; color: white; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); font-size: 24px;" data-i18n="dailyRewards.title">Nagrody Dzienne</h2>
            <div class="close-button" style="width: 36px; height: 36px; background-color: #ff5252; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; color: white; font-weight: bold; font-size: 20px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); transition: all 0.2s ease;">×</div>
        </div>
        <div class="kalendarz-body" style="padding: 15px;">
            <div class="daily-reward-info" style="text-align: center; margin-bottom: 15px; background: #e3f2fd; padding: 12px; border-radius: 12px; color: #1565c0;">
                <p style="font-size: 16px; margin: 5px 0;" data-i18n="dailyRewards.description">Odbieraj codzienne nagrody i utrzymuj serię przez 7 dni!</p>
                <div class="daily-reward-timer" style="display: none; font-weight: bold; color: #0d47a1; margin-top: 8px; font-size: 16px;">
                    <span data-i18n="dailyRewards.nextReward">Następna nagroda za: </span><span id="daily-timer">00h 00m 00s</span>
                </div>
            </div>
            
            <div class="daily-rewards-container" style="margin-bottom: 20px;">
                <!-- Tu będą dynamicznie generowane nagrody przez JavaScript -->
            </div>
        </div>
    </div>
</div>















                <img src="assets/images/logo.png" alt="FEED & FLAP" class="game-logo">
            </div>
          

            <div id="main-level-info">
                <div class="main-level-badge"><span data-i18n="mainScreen.level" data-i18n-values='{"level": "1"}'>Poziom 1</span></div>
                <div class="main-xp-bar">
                    <div class="main-xp-progress" id="main-xp-progress-bar"></div>
                </div>
                <div class="main-xp-text"><span data-i18n="mainScreen.xp" data-i18n-values='{"current": "0", "next": "100"}'>0/100 XP</span></div>
            </div>

        </div>




            <!-- Ekran karmienia ptaków -->
            <div id="feed-screen" class="game-screen" style="background-image: url('assets/images/feed-bg.jpg');">
                <h2> </h2>
                <div id="current-location-info">
                    <h3 id="current-location-name" data-i18n="locations.parkName">Park Miejski</h3>
                </div>
               
               
<!-- Przycisk katalogu ptaków -->
<div class="bird-catalog-button" id="bird-catalog-button" style="position: fixed; top: 70px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/katalog-icon.png" alt="Katalog ptaków" class="catalog-icon" style="width: 56px; height: 56px;">
</div>

<!-- Przycisk mapy lokacji -->
<div class="map-button" id="map-button" style="position: fixed; top: 140px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/map-icon.png" alt="Mapa lokacji" class="map-icon" style="width: 51px; height: 51px;">
</div>

<!-- Przycisk sklepu z dekoracjami -->
<div class="shop-button" id="shop-button" style="position: fixed; top: 205px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/shop-icon.png" alt="Sklep z dekoracjami" class="shop-icon" style="width: 51px; height: 51px;">
</div>


                <div id="bird-slots">
                    <div class="bird-slot" data-slot="0">
                        <div class="bird-image"></div>
                        <div class="bird-timer"></div>
                        <div class="bird-buttons">
                            <button class="feed-button" data-i18n="birdSlots.feedBird">Nakarm</button>
                            <button class="scare-button" data-i18n="birdSlots.scareBird">Przepędź</button>
                            <button class="collect-reward-button" data-i18n="birdSlots.collectReward">Odbierz</button>
                        </div>
                    </div>
                    <div class="bird-slot" data-slot="1">
                        <div class="bird-image"></div>
                        <div class="bird-timer"></div>
                        <div class="bird-buttons">
                            <button class="feed-button" data-i18n="birdSlots.feedBird">Nakarm</button>
                            <button class="scare-button" data-i18n="birdSlots.scareBird">Przepędź</button>
                            <button class="collect-reward-button" data-i18n="birdSlots.collectReward">Odbierz</button>
                        </div>
                    </div>
                    <div class="bird-slot locked" data-slot="2">
                        <div class="lock-icon"></div>
                        <div class="bird-image"></div>
                        <div class="bird-timer"></div>
                        <div class="bird-buttons">
                            <button class="feed-button" data-i18n="birdSlots.feedBird">Nakarm</button>
                            <button class="scare-button" data-i18n="birdSlots.scareBird">Przepędź</button>
                            <button class="collect-reward-button" data-i18n="birdSlots.collectReward">Odbierz</button>
                        </div>
                        <p data-i18n="birdSlots.lockInfo" data-i18n-values='{"amount": "50"}'>Odblokuj za 50 DziubCoinów</p>
                        <button class="unlock-button" data-i18n="birdSlots.unlock">Odblokuj</button>
                    </div>
                    <div class="bird-slot locked" data-slot="3">
                        <div class="lock-icon"></div>
                        <div class="bird-image"></div>
                        <div class="bird-timer"></div>
                        <div class="bird-buttons">
                            <button class="feed-button" data-i18n="birdSlots.feedBird">Nakarm</button>
                            <button class="scare-button" data-i18n="birdSlots.scareBird">Przepędź</button>
                            <button class="collect-reward-button" data-i18n="birdSlots.collectReward">Odbierz</button>
                        </div>
                        <p data-i18n="birdSlots.lockInfo" data-i18n-values='{"amount": "200"}'>Odblokuj za 200 DziubCoinów</p>
                        <button class="unlock-button" data-i18n="birdSlots.unlock">Odblokuj</button>
                    </div>
                    <div class="bird-slot locked" data-slot="4">
                        <div class="lock-icon"></div>
                        <div class="bird-image"></div>
                        <div class="bird-timer"></div>
                        <div class="bird-buttons">
                            <button class="feed-button" data-i18n="birdSlots.feedBird">Nakarm</button>
                            <button class="scare-button" data-i18n="birdSlots.scareBird">Przepędź</button>
                            <button class="collect-reward-button" data-i18n="birdSlots.collectReward">Odbierz</button>
                        </div>
                        <p data-i18n="birdSlots.lockInfo" data-i18n-values='{"amount": "500"}'>Odblokuj za 500 DziubCoinów</p>
                        <button class="unlock-button" data-i18n="birdSlots.unlock">Odblokuj</button>
                    </div>
                </div>
            </div>




           




            <!-- Ekran produkcji - ZMODYFIKOWANY -->
<div id="production-screen" class="game-screen" style="background-image: url('assets/images/production-bg.jpg');">
    <h2 class="production-title" data-i18n="production.title">Produkcja Ziarenek</h2>
    
    <div class="production-container">
        <!-- Sekcja Auto Zbierusia -->
        <div class="auto-collect-section">
            <div class="auto-collect-header">
                <div class="auto-collect-title" data-i18n="production.autoCollector">Auto Zbieruś</div>
                <div class="resource-counter">
                    <span id="auto-count">0</span> / <span id="auto-limit">20</span>
                </div>
            </div>
            
            <div class="auto-collect-progress">
                <div class="auto-collect-bar" id="auto-collect-progress-bar"></div>
            </div>
            
            <button id="collect-auto-button" onclick="window.autoCollect(); return false;">
                <img src="assets/images/seed-icon.png" alt="Ziarenko" class="seed-icon">
                <span data-i18n="production.collectAuto">Zbierz auto-zbiór</span>
            </button>
        </div>
        
        <!-- Sekcja ulepszeń -->
        <div class="upgrade-section">
            <h3 data-i18n="production.upgrades">Ulepszenia</h3>
            <div class="upgrade-items">
                <div class="upgrade-item">
                  
                    
<div class="upgrade-icon">
    <img src="assets/images/chest-icon.png" alt="Skrzynia" style="width: 55px; height: 55px;">
</div>

                    <div class="upgrade-info">
                        <h4 data-i18n="production.biggerCapacity">Większy Auto Zbieruś</h4>
                        <p data-i18n="production.biggerCapacityDesc">Zwiększa pojemność o 10</p>
                    </div>
                    <button class="upgrade-button" data-upgrade="auto-capacity" data-i18n="production.upgradeButton" data-i18n-values='{"amount": "20"}'>Ulepsz (20 DziubCoinów)</button>
                </div>
                
                <div class="upgrade-item">
           
                    
<div class="upgrade-icon">
    <img src="assets/images/clock-icon.png" alt="Zegar" style="width: 45px; height: 45px;">
</div>

                    <div class="upgrade-info">
                        <h4 data-i18n="production.fasterCollection">Szybszy Auto Zbieruś</h4>
                        <p data-i18n="production.fasterCollectionDesc">Zwiększa szybkość zbierania</p>
                    </div>
                    <button class="upgrade-button" data-upgrade="auto-speed" data-i18n="production.upgradeButton" data-i18n-values='{"amount": "30"}'>Ulepsz (30 DziubCoinów)</button>
                </div>
            </div>
        </div>
        
        <!-- Przyciski zbierania (przesunięte na dół) -->
        <div class="collect-buttons">
            <button id="collect-button" onclick="window.manualCollect(); return false;">
                <img src="assets/images/seed-icon.png" alt="Ziarenko" class="seed-icon-large">
                <span class="button-text" data-i18n="production.collectSeed">Zbierz ziarenko</span>
            </button>
        </div>
    </div>
</div>








         <!-- Ekran misji - PRZEPROJEKTOWANY -->

         



         <div id="missions-screen" class="game-screen" style="background-image: url('assets/images/missions-bg.jpg'); background-size: cover; background-position: center;">
    <h2 class="missions-main-title" data-i18n="missions.title">Misje</h2>
    
    <!-- Nagłówek z informacją o misjach -->
    <div class="missions-header">
        <div class="missions-info">
            <div class="missions-icon">🎯</div>
            <div class="missions-text" data-i18n="missions.description">Wykonuj misje, aby zdobywać cenne nagrody!</div>
        </div>
    </div>
    
    <!-- Sekcja misji dziennych -->
    <div class="missions-section daily-missions-container">
        <div class="section-header">
            <div class="section-title-container">
                <div class="section-icon">📅</div>
                <h3 class="section-title" data-i18n="missions.daily">Misje dzienne</h3>
            </div>
            <div class="reset-timer" id="daily-missions-timer">
                <div class="timer-icon">🕒</div>
                <div class="timer-text" data-i18n="missions.resetTimer">Resetuje się o 00:00 UTC</div>
            </div>
        </div>
        <div id="daily-missions-list" class="missions-list">
            <!-- Misje dzienne będą generowane dynamicznie przez JavaScript -->
        </div>
    </div>
    
    <!-- Sekcja misji tygodniowych -->
    <div class="missions-section weekly-missions-container">
        <div class="section-header">
            <div class="section-title-container">
                <div class="section-icon">🗓️</div>
                <h3 class="section-title" data-i18n="missions.weeklyTitle">Misje tygodniowe</h3>
            </div>
            <div class="reset-timer" id="weekly-missions-timer">
                <div class="timer-icon">🕒</div>
                <div class="timer-text" data-i18n="missions.weeklyResetTimer">Resetuje się w sobotę o północy UTC</div>
            </div>
        </div>
        <div id="weekly-missions-list" class="missions-list">
            <!-- Misje tygodniowe będą generowane dynamicznie przez JavaScript -->
        </div>
    </div>
</div>
 









<div id="bird-catalog-screen" class="game-screen" style="background-image: linear-gradient(rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.35)), url('assets/images/catalog-bg.jpg'); background-size: cover; background-position: center;">
    <h2>.</h2>
    <button class="back-button" id="catalog-back-button" data-i18n="general.back">← Powrót</button>
    
    <div class="catalog-container">
        <div class="catalog-header">
            <div class="catalog-title" data-i18n="catalog.title">Katalog ptaków</div>
        </div>
        
        <div id="catalog-locations-container">
            <!-- Statyczny HTML dla Parku Miejskiego -->
            <div class="catalog-location" id="park-catalog">
                <div class="location-header">
                    <div class="location-name" data-i18n="locations.parkName">Park Miejski</div>
                    <div class="location-status" data-i18n="locations.unlocked">Odblokowane</div>
                
                </div>
                <div class="bird-grid">
                   <!-- Park Miejski - Wróbel -->
<div class="catalog-bird-item" data-bird-id="common_sparrow">
    <div class="catalog-bird-image" style="background-image: url('assets/images/common-bird.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.commonSparrow">Wróbel pospolity</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.common">Pospolity</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 65%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 30s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "2"}'>2 ziarenka</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "1"}'>1 DziubCoin</span>
                            </div>
                        </div>
                    </div>
                    
              <!-- Park Miejski - Gołąb -->                
<div class="catalog-bird-item bird-undiscovered" data-bird-id="rare_robin">
    <div class="catalog-bird-image" style="background-image: url('assets/images/rare-bird.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.rareRobin">Gołąb krakowski</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.rare">Rzadki</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 25%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 60s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "5"}'>5 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "3"}'>3 DziubCoiny</span>
                            </div>
                        </div>
                    </div>
                    
                <!-- Park Miejski - Sójka -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="epic_cardinal">
    <div class="catalog-bird-image" style="background-image: url('assets/images/epic-bird.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.epicCardinal">Sójka białolica</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.epic">Epicki</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 9%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 120s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "10"}'>10 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "5"}'>5 DziubCoinów</span>
                            </div>
                        </div>
                    </div>
                    
              <!-- Park Miejski - Grafeniks -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="legendary_phoenix">
    <div class="catalog-bird-image" style="background-image: url('assets/images/legendary-bird.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.legendaryPhoenix">Grafeniks</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.legendary">Legendarny</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.9%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 600s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "50"}'>50 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "15"}'>15 DziubCoinów</span>
                            </div>
                        </div>
                    </div>
                    
            <!-- Park Miejski - Bielik -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="mythical_eagle">
    <div class="catalog-bird-image" style="background-image: url('assets/images/mythical-bird.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.mythicalEagle">Bielik Koronny</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.mythical">Mityczny</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.1%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 1200s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.fruits" data-i18n-values='{"amount": "1"}'>1 owoc</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.ton" data-i18n-values='{"amount": "0.003"}'>0,003 TON</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Statyczny HTML dla Brzegu Jeziora (domyślnie zablokowany) -->
            <div class="catalog-location location-locked" id="lake-catalog">
                <div class="location-header">
                    <div class="location-name" data-i18n="locations.lakeName">Brzeg Jeziora</div>
                    <div class="location-status" data-i18n="locations.locked">Zablokowane</div>
                </div>
                
              
                
                <!-- Siatka ptaków (domyślnie ukryta) -->
                <div class="bird-grid">
              <!-- Jezioro - ptaki -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="common_duck">
    <div class="catalog-bird-image" style="background-image: url('assets/images/lake-common.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.commonDuck">Kaczka krzyżówka</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.common">Pospolity</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 60%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 40s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "3"}'>3 ziarenka</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "2"}'>2 DziubCoiny</span>
                            </div>
                        </div>
                    </div>
                    
                 <!-- Jezioro - ptaki -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="rare_heron">
    <div class="catalog-bird-image" style="background-image: url('assets/images/lake-rare.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.rareHeron">Łabędź krzykliwy</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.rare">Rzadki</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 30%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 80s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "7"}'>7 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "5"}'>5 DziubCoinów</span>
                            </div>
                        </div>
                    </div>
                    
           <!-- Jezioro - ptaki -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="epic_swan">
    <div class="catalog-bird-image" style="background-image: url('assets/images/lake-epic.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.epicSwan">Pelikan różowy</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.epic">Epicki</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 9%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 160s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "15"}'>15 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "10"}'>10 DziubCoinów</span>
                            </div>
                        </div>
                    </div>
                    
               <!-- Jezioro - ptaki -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="legendary_pelican">
    <div class="catalog-bird-image" style="background-image: url('assets/images/lake-legendary.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.legendaryPelican">Czapla jeziorna</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.legendary">Legendarny</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.95%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 800s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "75"}'>75 ziarenek</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "25"}'>25 DziubCoinów</span>
                            </div>
                        </div>
                    </div>
                    
               <!-- Jezioro - ptaki -->
<div class="catalog-bird-item bird-undiscovered" data-bird-id="mythical_kraken">
    <div class="catalog-bird-image" style="background-image: url('assets/images/lake-mythical.png')"></div>
    <div class="catalog-bird-name" data-i18n="catalog.birdNames.mythicalKraken">Błękitny Widmoptak</div>
    <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
                        <div class="catalog-bird-stats">
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.type">Typ:</span> 
                                <span data-i18n="catalog.birdTypes.mythical">Mityczny</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.05%
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.time">Czas:</span> 1600s
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                                <span data-i18n="catalog.birdStats.fruits" data-i18n-values='{"amount": "3"}'>3 owoce</span>
                            </div>
                            <div class="catalog-bird-stat">
                                <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.ton" data-i18n-values='{"amount": "0.008"}'>0,008 TON</span>
                            </div>
                        </div>
                    </div>



                </div>
            </div>

<!-- Statyczny HTML dla Tajemniczego Lasu (domyślnie zablokowany) -->
<div class="catalog-location location-locked" id="forest-catalog">
    <div class="location-header">
        <div class="location-name" data-i18n="locations.forestName">Tajemniczy Las</div>
        <div class="location-status" data-i18n="locations.locked">Zablokowane</div>
    </div>
    
    <!-- Informacja o odblokowaniu (wyświetlana gdy lokacja jest zablokowana) -->
    <div class="location-lock-info" data-i18n="locations.unlockInfo" data-i18n-values='{"amount": "50"}'>
        Odblokuj tę lokację za 50 DziubCoinów w menu Mapy!
    </div>
    
    <!-- Siatka ptaków (domyślnie ukryta) -->
    <div class="bird-grid" style="display: none;">
        <!-- Tajemniczy Las - ptaki -->
        <div class="catalog-bird-item bird-undiscovered" data-bird-id="common_woodpecker">
            <div class="catalog-bird-image" style="background-image: url('assets/images/forest-common.png')"></div>
            <div class="catalog-bird-name" data-i18n="catalog.birdNames.commonWoodpecker">Sikorka bogatka</div>
            <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
            <div class="catalog-bird-stats">
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.type">Typ:</span> 
                    <span data-i18n="catalog.birdTypes.common">Pospolity</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.chance">Szansa:</span> 58%
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.time">Czas:</span> 45s
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                    <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "4"}'>4 ziarenka</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "2"}'>2 DziubCoiny</span>
                </div>
            </div>
        </div>
        
        <div class="catalog-bird-item bird-undiscovered" data-bird-id="rare_owl">
            <div class="catalog-bird-image" style="background-image: url('assets/images/forest-rare.png')"></div>
            <div class="catalog-bird-name" data-i18n="catalog.birdNames.rareOwl">Dzięcioł czarny</div>
            <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
            <div class="catalog-bird-stats">
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.type">Typ:</span> 
                    <span data-i18n="catalog.birdTypes.rare">Rzadki</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.chance">Szansa:</span> 32%
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.time">Czas:</span> 90s
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                    <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "8"}'>8 ziarenek</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "6"}'>6 DziubCoinów</span>
                </div>
            </div>
        </div>
        
        <div class="catalog-bird-item bird-undiscovered" data-bird-id="epic_hawk">
            <div class="catalog-bird-image" style="background-image: url('assets/images/forest-epic.png')"></div>
            <div class="catalog-bird-name" data-i18n="catalog.birdNames.epicHawk">Mroczny Puchacz</div>
            <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
            <div class="catalog-bird-stats">
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.type">Typ:</span> 
                    <span data-i18n="catalog.birdTypes.epic">Epicki</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.chance">Szansa:</span> 9%
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.time">Czas:</span> 180s
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                    <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "18"}'>18 ziarenek</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "12"}'>12 DziubCoinów</span>
                </div>
            </div>
        </div>
        
        <div class="catalog-bird-item bird-undiscovered" data-bird-id="legendary_griffin">
            <div class="catalog-bird-image" style="background-image: url('assets/images/forest-legendary.png')"></div>
            <div class="catalog-bird-name" data-i18n="catalog.birdNames.legendaryGriffin">Złotopióry</div>
            <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
            <div class="catalog-bird-stats">
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.type">Typ:</span> 
                    <span data-i18n="catalog.birdTypes.legendary">Legendarny</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.9%
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.time">Czas:</span> 900s
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                    <span data-i18n="catalog.birdStats.seeds" data-i18n-values='{"amount": "80"}'>80 ziarenek</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.coins" data-i18n-values='{"amount": "30"}'>30 DziubCoinów</span>
                </div>
            </div>
        </div>
        
        <div class="catalog-bird-item bird-undiscovered" data-bird-id="mythical_phoenix">
            <div class="catalog-bird-image" style="background-image: url('assets/images/forest-mythical.png')"></div>
            <div class="catalog-bird-name" data-i18n="catalog.birdNames.mythicalPhoenix">Duch Lasu</div>
            <div class="catalog-bird-name-undiscovered" data-i18n="catalog.undiscovered" style="display: none;">Nieodkryty</div>
            <div class="catalog-bird-stats">
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.type">Typ:</span> 
                    <span data-i18n="catalog.birdTypes.mythical">Mityczny</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.chance">Szansa:</span> 0.1%
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.time">Czas:</span> 1800s
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.cost">Koszt:</span> 
                    <span data-i18n="catalog.birdStats.fruits" data-i18n-values='{"amount": "5"}'>5 owoców</span>
                </div>
                <div class="catalog-bird-stat">
                    <span data-i18n="catalog.birdStats.reward">Nagroda:</span> <span data-i18n="resources.ton" data-i18n-values='{"amount": "0.012"}'>0,012 TON</span>
                </div>
            </div>
        </div>
    </div>
</div>


                    </div>
                </div>
            </div>












            <div id="map-screen" class="game-screen" style="background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('assets/images/map-bg.jpg'); background-size: cover; background-position: center;">
                <h2>.</h2>
                <button class="back-button" id="map-back-button" data-i18n="general.back">← Powrót</button>
    
    <div class="catalog-container">
        <div class="catalog-header">
            <div class="catalog-title" data-i18n="catalog.mapTitle">Mapa lokacji</div>
        </div>
    
        


<!-- Kontener dla lokacji w układzie poziomym - z grafikami -->
<div class="locations-row">

    



<!-- Lokacja: Park Miejski -->
<div class="location-item" data-location="park">
    <div class="location-image-container">
        <img src="assets/images/park-image.jpg" alt="Park Miejski" class="location-vertical-image">
    </div>
    <div class="location-content">
        <div class="location-header">
            <div class="location-name" data-i18n="locations.parkName">Park Miejski</div>
            <div class="location-status" data-i18n="locations.unlocked">Odblokowane</div>
        </div>
        <div class="location-description" data-i18n="locations.description.park">
            Twoja pierwsza lokacja. Można tu spotkać miejskie gatunki ptaków.
        </div>
        <div class="location-buttons-container">
            <button class="location-button select-location-button active" data-location="park" data-i18n="locations.buttons.selected">Wybrano</button>
            <button class="action-all-button" data-location="park" data-action="feed" data-i18n="locations.buttons.feedAll">Nakarm wszystkie</button>
        </div>
    </div>
</div>





<!-- Lokacja: Brzeg Jeziora (zablokowana) -->
<div class="location-item locked" data-location="lake">
    <div class="location-image-container">
        <img src="assets/images/lake-image.jpg" alt="Brzeg Jeziora" class="location-vertical-image">
    </div>
    <div class="location-content">
        <div class="location-header">
            <div class="location-name" data-i18n="locations.lakeName">Brzeg Jeziora</div>
            <div class="location-status" data-i18n="locations.unlocked">Odblokowane</div>
        </div>
        <div class="location-description" data-i18n="locations.description.lake">
            Nowe miejsce pełne przybrzeżnych ptaków! Odblokuj, aby zyskać dostęp do nowych gatunków.
        </div>


        <div class="location-buttons-container">
            <button class="location-button unlock-location-button" data-location="lake" data-cost="10">
                <i class="lock-icon"></i> <span data-i18n="locations.unlockFor" data-i18n-values='{"amount": "300"}'>Odblokuj za 300 DziubCoinów</span>
            </button>
            <button class="action-all-button" data-location="lake" data-action="feed" data-i18n="locations.buttons.feedAll">Nakarm wszystkie</button>
        </div>



       



    </div>
</div>
 




<!-- Tajemniczy Las -->
<div class="location-item locked" data-location="forest">
    <div class="location-image-container">
        <img src="assets/images/forest-image.jpg" alt="Tajemniczy Las" class="location-vertical-image">
    </div>
    <div class="location-content">
        <div class="location-header">
            <div class="location-name" data-i18n="locations.forestName">Tajemniczy Las</div>
            <div class="location-status" data-i18n="locations.locked">Zablokowane</div>
        </div>
        <div class="location-description" data-i18n="locations.description.forest">
            Magiczne miejsce ukryte pośród drzew. Odblokuj, aby odkryć rzadkie leśne ptaki.
        </div>



        <div class="location-buttons-container">
            <button class="location-button unlock-location-button" data-location="forest" data-cost="50">
                <i class="lock-icon"></i> <span data-i18n="locations.unlockFor" data-i18n-values='{"amount": "1000"}'>Odblokuj za 1000 DziubCoinów</span>
            </button>
            <button class="action-all-button disabled" data-location="forest" data-action="none" style="display: none;" data-i18n="locations.buttons.collectAll">Odbierz wszystkie</button>
        </div>


       
    </div>
</div>



<!-- Placeholder dla przyszłej lokacji -->
<div class="location-item coming-soon">
    <div class="location-image-container">
        <div class="location-coming-soon-image">?</div>
    </div>
    <div class="location-content">
        <div class="location-header">
            <div class="location-name" data-i18n="locations.newLocation">Nowa lokacja</div>
            <div class="location-status coming-soon-status" data-i18n="locations.comingSoon">Wkrótce dostępna!</div>
        </div>
        <div class="location-description" data-i18n="locations.description.comingSoonDesc">
            Tajemnicza nowa lokacja zostanie dodana w kolejnej aktualizacji. Nowe ptaki, nowe wyzwania!
        </div>
        <button class="location-button coming-soon-button" disabled>
            <i class="hourglass-icon">⏳</i> <span data-i18n="locations.buttons.availableSoon">Dostępna wkrótce</span>
        </button>
    </div>
</div>


        </div>
    </div>
</div>

<!-- Ekran sklepu z dekoracjami -->
<div id="shop-screen" class="game-screen" style="background-image: url('assets/images/shop-bg.jpg');">
    <h2></h2>
    <button class="back-button" id="shop-back-button" data-i18n="general.back">← Powrót</button>
    
    <div class="shop-container">
        <!-- Nagłówek sklepu -->
        <div class="shop-header">
            <div class="shop-title" data-i18n="shop.title">Rozbuduj lokację!</div>
            <div class="shop-balance">
          
          
            </div>
        </div>
        
        <!-- Sekcja dekoracji Parku Miejskiego -->
        <div class="shop-section" id="park-decorations">
            <div class="shop-section-header">
                <h3 data-i18n="shop.sectionHeaders.park">Park Miejski</h3>
                <p data-i18n="shop.sectionHeaders.description" data-i18n-values='{"location": "Park Miejski"}'>Ulepsz Park Miejski, aby zyskać bonusy!</p>
            </div>
            
            <div class="decoration-items">
           
                

<!-- Ławka -->
<div class="decoration-item" data-location="park" data-decoration="bench">
    <div class="decoration-image-container">
        <img src="assets/images/decorations/park-bench-small.png" alt="Ławka w parku" class="decoration-image">
    </div>
    <div class="decoration-content">
        <div class="decoration-name" data-i18n="shop.decorations.benchName">Ławka w parku</div>
        <div class="decoration-description" data-i18n="shop.decorations.benchDesc">Urocza ławka na której siadają goście parku, by karmić dzióbasy</div>
        <div class="decoration-bonus" data-i18n="shop.decorations.benchBonus">Bonus: -10% koszt karmienia ptaków</div>
        <button class="buy-decoration-button">
            <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
            <span>0,01 TON</span>
        </button>
    </div>
</div>

<!-- Fontanna -->
<div class="decoration-item" data-location="park" data-decoration="fountain">
    <div class="decoration-image-container">
        <img src="assets/images/decorations/park-fountain-small.png" alt="Fontanna" class="decoration-image">
    </div>
    <div class="decoration-content">
        <div class="decoration-name" data-i18n="shop.decorations.fountainName">Fontanna</div>
        <div class="decoration-description" data-i18n="shop.decorations.fountainDesc">Piękna fontanna przyciągająca DziubCoiny</div>
        <div class="decoration-bonus" data-i18n="shop.decorations.fountainBonus">Bonus: +10% więcej DziubCoinów</div>
        <button class="buy-decoration-button">
            <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
            <span>0,01 TON</span>
        </button>
    </div>
</div>

<!-- Balon wycieczkowy -->
<div class="decoration-item" data-location="park" data-decoration="balloon">
    <div class="decoration-image-container">
        <img src="assets/images/decorations/park-balloon-small.png" alt="Balon wycieczkowy" class="decoration-image">
    </div>
    <div class="decoration-content">
        <div class="decoration-name" data-i18n="shop.decorations.balloonName">Balon wycieczkowy</div>
        <div class="decoration-description" data-i18n="shop.decorations.balloonDesc">Kolorowy balon, dzięki któremu ptaki szybciej jedzą aby wrócić do zabawy</div>
        <div class="decoration-bonus" data-i18n="shop.decorations.balloonBonus">Bonus: -10% czas karmienia</div>
        <button class="buy-decoration-button">
            <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
            <span>0,05 TON</span>
        </button>
    </div>
</div>



            </div>
        </div>
        















<!-- Sekcja dekoracji Brzegu Jeziora -->
<div class="shop-section locked" id="lake-decorations">
    <div class="shop-section-header">
        <h3 data-i18n="shop.sectionHeaders.lake">Brzeg Jeziora</h3>
        <p data-i18n="shop.sectionHeaders.description" data-i18n-values='{"location": "Brzeg Jeziora"}'>Ulepsz Brzeg Jeziora, aby zyskać bonusy!</p>
    </div>
    
    <div class="decoration-items">
        <!-- Łódka -->
        <div class="decoration-item" data-location="lake" data-decoration="boat">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/lake-boat-small.png" alt="Łódka" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.boatName">Łódka</div>
                <div class="decoration-description" data-i18n="shop.decorations.boatDesc">Mała łódka, która pozwala podpłynąć bliżej do ptaków, dzięki czemu karmienie jest tańsze</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.boatBonus">Bonus: -12% koszt karmienia ptaków</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,01 TON</span>
                </button>
            </div>
        </div>

        <!-- Latawiec -->
        <div class="decoration-item" data-location="lake" data-decoration="kite">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/lake-kite-small.png" alt="Latawiec" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.kiteName">Latawiec</div>
                <div class="decoration-description" data-i18n="shop.decorations.kiteDesc">Kolorowy latawiec, który pomaga przyciągać ptaki i zwiększa ich hojność</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.kiteBonus">Bonus: +12% więcej DziubCoinów</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,01 TON</span>
                </button>
            </div>
        </div>

        <!-- Paralotnia -->
        <div class="decoration-item" data-location="lake" data-decoration="paraglider">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/lake-paraglider-small.png" alt="Paralotnia" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.paragliderName">Paralotnia</div>
                <div class="decoration-description" data-i18n="shop.decorations.paragliderDesc">Widowiskowa paralotnia, dzięki której ptaki są bardziej skupione na jedzeniu</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.paragliderBonus">Bonus: -12% czas karmienia</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,05 TON</span>
                </button>
            </div>
        </div>





     <!-- Sekcja dekoracji Tajemniczego Lasu -->
<div class="shop-section locked" id="forest-decorations">
    <div class="shop-section-header">
        <h3 data-i18n="shop.sectionHeaders.forest">Tajemniczy Las</h3>
        <p data-i18n="shop.sectionHeaders.description" data-i18n-values='{"location": "Tajemniczy Las"}'>Ulepsz Tajemniczy Las, aby zyskać bonusy!</p>
    </div>
    
    <div class="decoration-items">
        <!-- Grzyby -->
        <div class="decoration-item" data-location="forest" data-decoration="mushrooms">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/forest-mushrooms-small.png" alt="Magiczne grzyby" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.mushroomsName">Magiczne grzyby</div>
                <div class="decoration-description" data-i18n="shop.decorations.mushroomsDesc">Tajemnicze grzyby rosnące w lesie przyciągają ptaki swoim zapachem</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.mushroomsBonus">Bonus: -14% koszt karmienia ptaków</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,01 TON</span>
                </button>
            </div>
        </div>

        <!-- Wiewiórka -->
        <div class="decoration-item" data-location="forest" data-decoration="squirrel">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/forest-squirrel-small.png" alt="Przyjazna wiewiórka" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.squirrelName">Przyjazna wiewiórka</div>
                <div class="decoration-description" data-i18n="shop.decorations.squirrelDesc">Wesoła wiewiórka, która dzieli się swoimi zapasami z ptakami</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.squirrelBonus">Bonus: +14% więcej BirdCoinów</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,01 TON</span>
                </button>
            </div>
        </div>

        <!-- Jeleń -->
        <div class="decoration-item" data-location="forest" data-decoration="deer">
            <div class="decoration-image-container">
                <img src="assets/images/decorations/forest-deer-small.png" alt="Majestatyczny jeleń" class="decoration-image">
            </div>
            <div class="decoration-content">
                <div class="decoration-name" data-i18n="shop.decorations.deerName">Majestatyczny jeleń</div>
                <div class="decoration-description" data-i18n="shop.decorations.deerDesc">Dostojny jeleń, który swoją obecnością uspokaja ptaki</div>
                <div class="decoration-bonus" data-i18n="shop.decorations.deerBonus">Bonus: -14% czas karmienia</div>
                <button class="buy-decoration-button">
                    <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon-small">
                    <span>0,05 TON</span>
                </button>
            </div>
        </div>
    </div>
</div>
 
    </div>
</div>   </div>
</div>






<!-- Ekran ekspedycji -->
<div id="expeditions-screen" class="game-screen" style="background-image: url('assets/images/breeding-bg.jpg'); background-size: cover; background-position: center;">
 

<div class="reward-pass-button" style="position: fixed; top: 136px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/rewards-icon.png" alt="Nagrody" style="width: 59px; height: 59px;">
</div>



<div class="wardrobe-button" style="position: fixed; top: 136px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/wardrobe-icon.png" alt="Szafa" style="width: 55px; height: 55px;">
</div>




    <button class="back-button" id="expeditions-back-button" style="position: relative; top: 56px; left: 10px; position: fixed;" data-i18n="general.back">← Powrót</button>
    
    
    <div class="expeditions-container" style="width: 95%; max-width: 650px; margin: 60px auto 20px; background-color: rgba(255, 255, 255, 0.85); border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);">
        <h2 style="color: #9C27B0; text-align: center; margin-bottom: 15px;" data-i18n="expeditions.title">Ekspedycje</h2>
        
        <div class="expedition-info" style="text-align: center; margin-bottom: 20px;">
            <p data-i18n="expeditions.description">Wyślij swojego ptaka na ekspedycję, aby zdobyć cenne nagrody!</p>
            <p data-i18n="expeditions.petLevel" data-i18n-values='{"level": "4"}'>Twój ptak jest na poziomie 4.</p>
        </div>
        
        <div class="expeditions-list" style="display: flex; flex-direction: column; gap: 15px;">
            <!-- Tu będą dodawane dostępne ekspedycje przez JavaScript -->
            <div class="expedition-placeholder" style="text-align: center; padding: 20px; color: #666;" data-i18n="expeditions.loading">
                Ładowanie ekspedycji...
            </div>
        </div>
    </div>
</div>

<!-- Ekran przepustki nagród -->
<div id="reward-pass-screen" class="game-screen" style="background-image: url('assets/images/breeding-bg.jpg'); background-size: cover; background-position: center;">
     

    
    <button class="back-button" id="reward-pass-back-button" style="position: relative; top: 56px; left: 10px; position: fixed;" data-i18n="general.back">← Powrót</button>
    
    <div class="reward-pass-container" style="width: 90%; max-width: 800px; margin: 60px auto 20px; background-color: rgba(255, 255, 255, 0.489); border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);">
        <h2 class="reward-pass-title" style="color: #9C27B0; text-align: center; margin-bottom: 15px; font-size: 28px;" data-i18n="rewardPass.title">Nagrody Ekspedycji</h2>
        
        <div class="reward-timer" id="reward-pass-timer" style="text-align: center; font-size: 18px; margin-bottom: 20px; color: #333; background-color: rgba(255, 255, 255, 0.7); border-radius: 10px; padding: 10px; box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);" data-i18n="rewardPass.remaining" data-i18n-values='{"time": "29d 23h 59m"}'>
            Pozostało: 29d 23h 59m
        </div>
        
        <div class="reward-path-container" style="position: relative; width: 100%; overflow-x: auto; padding: 20px 0; margin-bottom: 20px;">
            <div class="reward-path" style="position: relative; min-width: 1400px; height: 300px; background: linear-gradient(to right, rgba(130, 193, 214, 0.678), rgba(173, 216, 230, 0.6)); border-radius: 15px; padding: 20px; display: flex; flex-direction: column;">
                <!-- Linia ścieżki -->
                <div class="path-line" style="position: absolute; top: 50%; left: 0; width: 100%; height: 20px; background-color: #8B4513; border-radius: 10px; z-index: 1;"></div>
                
                <!-- Ikona ptaka -->
                <div class="bird-icon" id="reward-pass-bird" style="position: absolute; top: calc(50% - 30px); left: 0; width: 60px; height: 60px; background-image: url('./assets/images/bird-adult-pass.png'); background-size: contain; background-repeat: no-repeat; background-position: center; z-index: 3;"></div>
                
                <!-- Kontenery nagród -->
                <div class="rewards-free" id="rewards-free-container" style="position: absolute; top: 20px; left: 0; width: 100%; height: 100px; z-index: 2;"></div>
                <div class="rewards-premium" id="rewards-premium-container" style="position: absolute; bottom: 20px; left: 0; width: 100%; height: 100px; z-index: 2;"></div>
                
                <!-- Znaczniki odległości -->
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 0%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">0m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 16.6%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">1000m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 33.3%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">2000m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 50%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">3000m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 66.6%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">4000m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 83.3%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">5000m</div>
                <div class="distance-marker" style="position: absolute; top: 50%; transform: translateY(-50%); left: 100%; font-size: 12px; font-weight: bold; color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 2px 8px; z-index: 2;">6000m</div>
            </div>
        </div>
        
        <div class="premium-pass-container" style="text-align: center; margin: 20px 0; padding: 15px; background-color: rgba(197, 177, 63, 0.805); border-radius: 10px; border: 2px solid gold;">
            <h3 style="color: #9C27B0;" data-i18n="rewardPass.premiumTitle">Premium Pass - Odblokuj Specjalne Nagrody!</h3>
            <p data-i18n="rewardPass.premiumDesc">Awansuj na Premium i otrzymaj dostęp do ekskluzywnych nagród oraz natychmiastowy bonus +500m!</p>
            <div class="premium-benefits" style="display: flex; justify-content: center; margin-top: 15px; flex-wrap: wrap; gap: 10px;">
                <div class="premium-benefit" style="background-color: white; border-radius: 10px; padding: 8px 15px; font-size: 14px; font-weight: bold; color: #333; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); display: flex; align-items: center;">
                    <span style="color: #4CAF50; margin-right: 5px;">✓</span> <span data-i18n="rewardPass.benefits.double">Podwójna ilość nagród</span>
                </div>
                <div class="premium-benefit" style="background-color: white; border-radius: 10px; padding: 8px 15px; font-size: 14px; font-weight: bold; color: #333; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); display: flex; align-items: center;">
                    <span style="color: #4CAF50; margin-right: 5px;">✓</span> <span data-i18n="rewardPass.benefits.betterTon">Lepsze nagrody TON</span>
                </div>
                <div class="premium-benefit" style="background-color: white; border-radius: 10px; padding: 8px 15px; font-size: 14px; font-weight: bold; color: #333; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); display: flex; align-items: center;">
                    <span style="color: #4CAF50; margin-right: 5px;">✓</span> <span data-i18n="rewardPass.benefits.instantBonus">+500m natychmiast</span>
                </div>
            </div>
            <button id="premium-pass-button" style="background: linear-gradient(45deg, #FFD700, #FFA500); color: white; border: none; border-radius: 10px; padding: 12px 25px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2); margin-top: 15px; display: inline-flex; align-items: center; justify-content: center;">
                <img src="assets/images/ton-icon.png" alt="TON" style="width: 20px; height: 20px; margin-right: 10px;"> <span data-i18n="rewardPass.buyPremium">Kup Premium Pass (2 TON)</span>
            </button>
        </div>
    </div>
</div>

<!-- Ekran aktywnej ekspedycji -->
<div id="active-expedition-screen" class="game-screen" style="background-image: url('assets/images/breeding-bg.jpg'); background-size: cover; background-position: center;">



    <div class="expedition-progress-container">
        <div class="expedition-title"></div>
        <div class="expedition-description"></div>
        <div class="expedition-timer" id="expedition-timer">00:00:00</div>
        
        <div class="bird-animation-container">
            <div class="flying-bird"></div>
        </div>
        
        <div class="expedition-progress-bar-container">
            <div class="expedition-progress-bar" id="expedition-progress-bar"></div>
        </div>
        
        <div class="expedition-rewards-preview"></div>
        
        <button class="expedition-cancel-button" id="expedition-cancel-button" data-i18n="activeExpedition.cancel">Anuluj ekspedycję</button>
    </div>
</div>
    </script>
    
<!-- Ekran Szafy -->
<div id="wardrobe-screen" class="game-screen" style="background-image: url('assets/images/wardrobe-bg.jpg'); background-size: cover; background-position: center;">
    <button class="back-button" id="wardrobe-back-button" style="position: relative; top: 56px; left: 10px; position: fixed;" data-i18n="general.back">← Powrót</button>
    
    <div class="wardrobe-container" style="width: 90%; max-width: 800px; margin: 80px auto 20px; background-color: rgba(255, 255, 255, 0.489); border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);">
        <h2 style="color: #2196F3; text-align: center; margin-bottom: 20px;" data-i18n="wardrobe.title">Szafa Ptaka</h2>
        
        <div class="wardrobe-content" style="display: flex; flex-direction: column; align-items: center;">
            <div class="wardrobe-bird-preview" style="width: 200px; height: 200px; background-color: rgba(255, 255, 255, 0.762); border-radius: 50%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center;">
                <!-- Tutaj będzie podgląd ptaka -->
                <img id="wardrobe-bird-image" src="assets/images/bird-adult.png" style="max-width: 80%; max-height: 80%;">
            </div>
            
            <div class="wardrobe-message" style="text-align: center; color: #666; margin-bottom: 30px;" data-i18n="wardrobe.description">
                Tutaj możesz zmienić wygląd swojego ptaka!
            </div>
            
            <!-- Kontener wyboru skinów -->
            <div class="skin-selection-container" style="width: 100%; display: flex; flex-direction: column; gap: 15px;">
                <h3 style="color: #2196F3; text-align: center; margin-bottom: 10px;" data-i18n="wardrobe.availableSkins">Dostępne skiny:</h3>
                
                <!-- Skin 1: Podstawowy -->
                <div class="skin-item" style="display: flex; background-color: white; border-radius: 12px; overflow: hidden; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1); border: 3px solid #4CAF50;" data-skin-id="default">
                    <div class="skin-image" style="width: 100px; height: 100px; background-color: #f5f5f5; display: flex; align-items: center; justify-content: center; padding: 10px;">
                        <img src="assets/images/skins/default-skin.png" alt="Podstawowy" style="max-width: 90%; max-height: 90%; object-fit: contain;">
                    </div>
                    
                    <div class="skin-info" style="flex: 1; padding: 15px; display: flex; flex-direction: column; justify-content: space-between;">
                        <div>
                            <div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;" data-i18n="wardrobe.skins.defaultName">Podstawowy</div>
                            <div style="color: #666; font-size: 14px;" data-i18n="wardrobe.skins.defaultDesc">Standardowy wygląd ptaka</div>
                            <div style="color: #999; font-size: 12px; margin-top: 5px;" data-i18n="wardrobe.skins.defaultBonus">Bonus: brak</div>
                        </div>
                        
                        <button class="skin-select-button selected" style="background-color: #4CAF50; color: white; border: none; border-radius: 6px; padding: 8px 15px; cursor: pointer; font-weight: bold; width: fit-content; transition: background-color 0.2s;" data-skin-id="default" data-i18n="wardrobe.skins.selected">
                            Wybrany
                        </button>
                    </div>
                </div>
                
              <!-- Skin 2: Leśny zwiadowca -->
<div class="skin-item locked" style="display: flex; background-color: white; border-radius: 12px; overflow: hidden; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);" data-skin-id="lesny">
    <div class="skin-image" style="width: 100px; height: 100px; background-color: #f5f5f5; display: flex; align-items: center; justify-content: center; padding: 10px;">
        <img src="assets/images/skins/lesny-skin.png" alt="Leśny zwiadowca" style="max-width: 90%; max-height: 90%; object-fit: contain;">
    </div>
    
    <div class="skin-info" style="flex: 1; padding: 15px; display: flex; flex-direction: column; justify-content: space-between;">
        <div>
            <div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;" data-i18n="wardrobe.skins.forestScoutName">Leśny zwiadowca</div>
            <div style="color: #666; font-size: 14px;" data-i18n="wardrobe.skins.forestScoutDesc">Doświadczony zwiadowca znający wszystkie zakamarki lasu</div>
            <div style="color: #4CAF50; font-size: 12px; margin-top: 5px; font-weight: bold;" data-i18n="wardrobe.skins.forestScoutBonus">Bonus: +10% ziarenek z ekspedycji</div>
            <div style="color: #9C27B0; font-size: 12px; margin-top: 3px; font-weight: bold;" data-i18n="wardrobe.skins.forestScoutRequirement">Wymagane: 1100m w ekspedycji</div>
        </div>
        
        <button class="skin-select-button" style="background-color: #666666; color: white; border: none; border-radius: 6px; padding: 8px 15px; cursor: not-allowed; font-weight: bold; width: fit-content; transition: background-color 0.2s;" data-skin-id="lesny" disabled data-i18n="wardrobe.skins.locked">
            Zablokowany
        </button>
    </div>
</div>
                
                <!-- Skin 3: Master Recruiter -->
                <div class="skin-item locked" style="display: flex; background-color: white; border-radius: 12px; overflow: hidden; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1); position: relative;" data-skin-id="master">
                    <div class="skin-image" style="width: 100px; height: 100px; background-color: #f5f5f5; display: flex; align-items: center; justify-content: center; padding: 10px;">
                        <img src="assets/images/skins/master-skin.png" alt="Master Recruiter" style="max-width: 90%; max-height: 90%; object-fit: contain;">
                    </div>
                    
                    <div class="skin-info" style="flex: 1; padding: 15px; display: flex; flex-direction: column; justify-content: space-between;">
                        <div>
                            <div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;" data-i18n="wardrobe.skins.masterRecruiterName">Master Recruiter</div>
                            <div style="color: #666; font-size: 14px;" data-i18n="wardrobe.skins.masterRecruiterDesc">Mistrz rekrutacji - symbol prestiżu i wpływu</div>
                            <div style="color: #FFD700; font-size: 12px; margin-top: 5px; font-weight: bold;" data-i18n="wardrobe.skins.masterRecruiterRequirement">Wymagane: 100 zaproszeń</div>
                        </div>
                        
                        <button class="skin-select-button" style="background-color: #666666; color: white; border: none; border-radius: 6px; padding: 8px 15px; cursor: not-allowed; font-weight: bold; width: fit-content; transition: background-color 0.2s;" data-skin-id="master" disabled data-i18n="wardrobe.skins.locked">
                            Zablokowany
                        </button>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>



    <!-- Ekran portfela (zmieniony z Osiągnięć) -->
<div id="wallet-screen" class="game-screen" style="background-image: url('assets/images/achievements-bg.jpg');">
    <h2 data-i18n="wallet.title"> </h2>
    
    <div class="wallet-container">
        <!-- Sekcja salda -->
        
        
     
<div class="wallet-balance">
    <h3 data-i18n="wallet.balance">Stan salda</h3>
    <div class="balance-display">
        <img src="assets/images/ton-icon.png" alt="TON" class="currency-icon">
        <div class="balance-amount" id="ton-balance-display">0,000 TON</div>
    </div>
    <button class="withdraw-button" data-i18n="wallet.withdraw">Wypłać</button>
</div>
        
 

<!-- Sekcja informacyjna o zdobywaniu TON -->
<div class="ton-info-section">

    <h3 class="ton-header" data-i18n="wallet.howToEarn">Jak zdobywać TON?</h3>
  
    <div class="ton-info-box">
      <div class="ton-info-left">
        <h4 data-i18n="wallet.mythicalBirds">Mityczne Ptaki</h4>
        <p data-i18n="wallet.mythicalBirdsDesc">W każdej lokacji masz szansę natrafić na mitycznego ptaka. Po jego nakarmieniu otrzymasz nagrodę TON. Potrzebujesz tylko owoców i cierpliwości</p>
      </div>
  
      <div class="vertical-divider"></div>
  
      <div class="ton-info-right">
        <h4 data-i18n="wallet.expeditions">Ekspedycje</h4>
        <p data-i18n="wallet.expeditionsDesc">Gdy twój ptak w gnieździe dorośnie, wyślij go na wyprawę pełną przygód. Może przynieść z niej cenne TON i inne nagrody</p>
      </div>
    </div>
  
  </div>
  
  

        
       <!-- Sekcja konwersji -->
<div class="conversion-section">
    <h3 data-i18n="wallet.currencyExchange">Wymień walutę</h3>
    
    <!-- Konwersja dziubcoinów na owoce -->
    <div class="conversion-row">
      
        
<div class="conversion-input">
    <input type="number" id="coins-input" min="0" data-i18n-placeholder="wallet.amountPlaceholder" placeholder="Ilość">
    <img src="assets/images/coin-icon.png" alt="DziubCoiny" data-i18n-alt="resources.coinsIcon">
</div>



        <div class="conversion-rate">
            <div class="rate-icon">100</div>
            <img src="assets/images/coin-icon.png" alt="DziubCoiny" width="20" height="20">
            <div class="conversion-arrow">→</div>
            <div class="rate-icon">1</div>
            <div class="fruit-icon resource-icon" style="width: 20px; height: 20px;">
                <img src="assets/images/fruit-icon.png" alt="Fruit Icon" />
            </div>
        </div>
        <div class="conversion-result">
            <span id="fruits-from-coins">0</span>
            <div class="fruit-icon resource-icon">
                <img src="assets/images/fruit-icon.png" alt="Fruit Icon" />
            </div>
        </div>
        <button class="convert-button" id="convert-coins-button" data-i18n="wallet.convert">Zamień</button>
    </div>
            
    <!-- Konwersja owoców na dziubcoiny -->
    <div class="conversion-row">
        <div class="conversion-input">
            <input type="number" id="fruits-input" min="0" data-i18n-placeholder="wallet.amountPlaceholder" placeholder="Ilość owoców">
            <div class="fruit-icon resource-icon">
                <img src="assets/images/fruit-icon.png" alt="Fruit Icon" />
            </div>
        </div>
        <div class="conversion-rate">
            <div class="rate-icon">1</div>
            <div class="fruit-icon resource-icon" style="width: 20px; height: 20px;">
                <img src="assets/images/fruit-icon.png" alt="Fruit Icon" />
            </div>
            <div class="conversion-arrow">→</div>
            <div class="rate-icon">90</div>
            <img src="assets/images/coin-icon.png" alt="DziubCoiny" width="20" height="20">
        </div>
        <div class="conversion-result">
            <span id="coins-from-fruits">0</span>
            <img src="assets/images/coin-icon.png" alt="DziubCoiny" width="24" height="24">
        </div>
        <button class="convert-button" id="convert-fruits-button" data-i18n="wallet.convert">Zamień</button>
    </div>
</div>


        
        <!-- Sekcja reklam -->
        <div class="ads-section">
            <h3 data-i18n="wallet.ads">Reklamy</h3>
            <button id="watch-ad-button" data-i18n="wallet.watchAd">Obejrzyj reklamę</button>
            <p data-i18n="wallet.adsPlaceholder">Funkcja w trakcie rozwoju. Wkrótce będziesz mógł otrzymywać nagrody za oglądanie reklam!</p>
        </div>
        
       
    </div>
</div>

        </div>


        

        

<!-- Całkowicie przebudowany ekran hodowli -->





<div id="breeding-screen" class="game-screen">
   
<div class="reward-pass-button" style="position: fixed; top: 136px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/rewards-icon.png" alt="Nagrody" style="width: 59px; height: 59px;">
</div>




<div class="wardrobe-button" style="position: fixed; top: 136px; right: 15px; width: 50px; height: 50px; background-color: #43b5e2; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); cursor: pointer; z-index: 1000; border: 2px solid #FFC107;">
    <img src="assets/images/wardrobe-icon.png" alt="Szafa" style="width: 59px; height: 59px;">
</div>


    <h2 style="color: #1e311f; text-align: center; margin-top: 10px; margin-bottom: 20px;" data-i18n="breeding.title">Hodowla Ptaków</h2>

    <div id="breeding-area" style="width: 90%; max-width: 600px; margin: 15px auto 70px; padding: 20px; background-color: rgba(255, 255, 255, 0.489); border-radius: 15px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); display: flex; flex-direction: column; align-items: center; gap: 15px;">
        <div id="pet-bird-container" style="width: 200px; height: 200px; display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; position: relative;">
            <div id="pet-bird-image" style="width: 150px; height: 150px; background-color: #F5DEB3; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 48px; color: #333; background-image: none; background-size: cover; background-position: center;"></div>
            <div id="pet-bird-name" style="font-weight: bold; font-size: 18px; margin-top: 10px;" data-i18n="breeding.noBird">Brak ptaka</div>
        </div>
        

    <!-- Statystyki ptaka -->
<div id="pet-stats" style="width: 100%; display: flex; flex-direction: column; gap: 10px;">
    <div class="pet-stat" style="display: flex; align-items: center; justify-content: space-between;">
        <span style="width: 100px; font-weight: bold;" data-i18n="breeding.stats.hunger">Głód:</span>
        <div class="stat-bar" style="width: 70%; height: 15px; background-color: #e0e0e0; border-radius: 7px; overflow: hidden;">
            <div id="hunger-bar" class="stat-progress" style="height: 100%; width: 0%; background-color: #4CAF50;"></div>
        </div>
    </div>
    <div class="pet-stat" style="display: flex; align-items: center; justify-content: space-between;">
        <span style="width: 100px; font-weight: bold;" data-i18n="breeding.stats.happiness">Szczęście:</span>
        <div class="stat-bar" style="width: 70%; height: 15px; background-color: #e0e0e0; border-radius: 7px; overflow: hidden;">
            <div id="happiness-bar" class="stat-progress" style="height: 100%; width: 0%; background-color: #FFC107;"></div>
        </div>
    </div>
    <div class="pet-stat" style="display: flex; align-items: center; justify-content: space-between;">
        <span style="width: 100px; font-weight: bold;" data-i18n="breeding.stats.cleanliness">Czystość:</span>
        <div class="stat-bar" style="width: 70%; height: 15px; background-color: #e0e0e0; border-radius: 7px; overflow: hidden;">
            <div id="cleanliness-bar" class="stat-progress" style="height: 100%; width: 0%; background-color: #2196F3;"></div>
        </div>
    </div>
    <div class="pet-stat" style="display: flex; align-items: center; justify-content: space-between;">
        <span style="width: 100px; font-weight: bold;" data-i18n="breeding.stats.experience">Doświadczenie:</span>
        <div class="stat-bar" style="width: 70%; height: 15px; background-color: #e0e0e0; border-radius: 7px; overflow: hidden;">
            <div id="experience-bar" class="stat-progress" style="height: 100%; width: 0%; background-color: #9C27B0;"></div>
        </div>
    </div>


 <div class="level-display" style="display: flex; justify-content: center; margin-top: -5px; margin-bottom: 5px; width: 100%;">
    <span id="pet-level-value" style="color: #9C27B0; font-weight: bold; font-size: 14px;" data-i18n="breeding.stats.level" data-i18n-values='{"level": "0"}'>Poziom: 0</span>
</div>


</div>
        
        <!-- Przyciski akcji -->
        <div id="pet-actions" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; width: 100%; margin-top: 10px;">
            <button id="feed-pet-button" style="background-color: #FF9800; color: white; border: none; border-radius: 5px; padding: 10px 20px; min-width: 100px; cursor: pointer; font-weight: bold;" data-i18n="breeding.feed">Nakarm</button>
            <button id="play-pet-button" style="background-color: #4CAF50; color: white; border: none; border-radius: 5px; padding: 10px 20px; min-width: 100px; cursor: pointer; font-weight: bold;" data-i18n="breeding.play">Baw się</button>
            <button id="clean-pet-button" style="background-color: #2196F3; color: white; border: none; border-radius: 5px; padding: 10px 20px; min-width: 100px; cursor: pointer; font-weight: bold;" data-i18n="breeding.clean">Wyczyść</button>
            <button id="hatch-pet-button" style="background-color: #9C27B0; color: white; border: none; border-radius: 5px; padding: 10px 20px; min-width: 100px; cursor: pointer; font-weight: bold;" data-i18n="breeding.getEgg">Zdobądź jajko</button>
        </div>
        
       <!-- Przycisk ekspedycji w nowym wierszu -->
    <button id="expeditions-button" style="background-color: #9C27B0; color: white; border: none; border-radius: 8px; padding: 15px 30px; font-size: 18px; cursor: pointer; font-weight: bold; margin-top: 5px; display: none; width: 200px;" data-i18n="breeding.expeditions">🚀 Ekspedycje</button>

        


        <!-- Informacje o ptaku -->
        <div id="pet-info" style="text-align: center; margin-top: 15px; min-height: 60px;">
            <p id="pet-status" style="font-weight: bold;" data-i18n="breeding.startBreeding">Zdobądź jajko, aby zacząć hodowlę!</p>
            
        </div>
    </div>
</div></div>

<!-- Ekran zabawy z ptakiem -->
<div id="play-screen" class="game-screen">
    
    <button class="back-button" id="play-back-button" data-i18n="general.back">← Powrót</button>
    
    <div id="play-bird-container">
        <div id="play-bird-image">
            <!-- Obrazek będzie dodany przez JavaScript -->
        </div>
        
        <div id="play-happiness-bar-container">
            <div class="stat-bar">
                <div id="play-happiness-bar" class="stat-progress"></div>
            </div>
            <div id="play-happiness-text" data-i18n="breeding.stats.happiness" data-i18n-values='{"percent": "0"}'>Szczęście: 0%</div>
        </div>
    </div>
</div>












<!-- Ekran minigry sortowania ziarenek -->


<div id="sorting-game-screen" class="game-screen" style="background-image: url('assets/images/breeding-bg.jpg'); background-size: cover; background-position: center; height: 100vh; margin-bottom: 0; padding-bottom: 160px; position: absolute; top: 0; left: 0; width: 100%; overflow-y: auto;">

    <button class="back-button" id="sorting-back-button" data-i18n="general.back">← Powrót</button>
    
    <!-- Timer na górze ekranu -->
    <div id="sorting-timer" style="color: white; text-align: center; font-size: 24px; font-weight: bold; background-color: rgba(0, 0, 0, 0.5); padding: 10px 20px; border-radius: 10px;">
        <span data-i18n="sortingGame.time" data-i18n-values='{"time": "0:45"}'>Czas: <span id="time-left">0:45</span></span>
    </div>
    
    <!-- Tytuł -->
    <h2 style="color: rgb(18, 53, 25); text-align: center; position: absolute; top: 80px; width: 100%; margin: 0;" data-i18n="sortingGame.title">Posortuj ziarenka</h2>
    
    <!-- Kontener gry -->
    <div id="sorting-game-container">
        <!-- Kontener na ziarenka -->
        <div id="seeds-container">
            <!-- Ziarenka będą dodawane dynamicznie przez JavaScript -->
        </div>
        
        <!-- Licznik pozostałych ziarenek -->
        <div id="seeds-remaining" style="color: white; font-size: 18px;">
            <span data-i18n="sortingGame.collected" data-i18n-values='{"count": "0"}'>Zebrałeś: <span id="collected-count">0</span> / 30 ziarenek</span>
        </div>
        
        <!-- Miseczki na dole -->
        <div id="bowls-container">
            <div class="bowl" data-type="1" style="width: 80px; height: 80px; position: relative;">
                <img src="assets/images/bowl1.png" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div class="bowl" data-type="2" style="width: 80px; height: 80px; position: relative;">
                <img src="assets/images/bowl2.png" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div class="bowl" data-type="3" style="width: 80px; height: 80px; position: relative;">
                <img src="assets/images/bowl3.png" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div class="bowl" data-type="4" style="width: 80px; height: 80px; position: relative;">
                <img src="assets/images/bowl4.png" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
        </div>
    </div>
    
    <!-- Ekran podsumowujący -->
    <div id="summary-screen" style="display: none;">
        <h2 style="color: #4CAF50; font-size: 36px; margin-bottom: 30px;" data-i18n="sortingGame.summary">Podsumowanie</h2>
        <p style="font-size: 24px; margin-bottom: 20px;" data-i18n="sortingGame.cleaned" data-i18n-values='{"count": "0"}'>Posprzątałeś: <span id="final-count">0</span> ziarenek</p>
        <p style="font-size: 24px; margin-bottom: 20px; color: #4CAF50;" data-i18n="sortingGame.cleanlinessGained" data-i18n-values='{"percent": "0"}'>Otrzymałeś: +<span id="cleanliness-gained">0</span>% czystości</p>
        <button onclick="endSortingGame()" style="background-color: #4CAF50; color: white; border: none; border-radius: 10px; padding: 15px 30px; font-size: 18px; cursor: pointer; margin-top: 30px;" data-i18n="sortingGame.finish">Koniec</button>
    </div>
</div>













<!-- Nawigacja na dole ekranu - UPROSZCZONA -->
<div id="navigation-bar">
   <button class="nav-button active" data-screen="main-screen" data-i18n="navigation.main">Główna</button>
    <button class="nav-button" data-screen="breeding-screen" data-i18n="navigation.breeding">Gniazdo</button>
  <button class="nav-button" data-screen="feed-screen" data-i18n="navigation.feeding">Karmienie</button>
    <button class="nav-button" data-screen="production-screen" data-i18n="navigation.production">Ziarenka</button>
    <button class="nav-button" data-screen="missions-screen">
        <span data-i18n="navigation.missions">Misje</span>
        <span class="badge" id="missions-badge"></span>
    </button>
    <button class="nav-button" data-screen="wallet-screen" data-i18n="navigation.wallet">Portfel</button>
</div>


       


   
<!-- Skrypty -->
<script>
    // Globalny obiekt gameState musi być dostępny dla wszystkich plików
   

 
    
    window.gameState = {
    player: {
        level: 1,
        xp: 0,
        nextLevelXp: 100
    },
    resources: {
        seeds: 10,
        coins: 0,
        fruits: 0,
        ton: 0.000,
        autoSeedAmount: 0,
        autoCollectLimit: 20,
        autoCollectTimer: 0,
        autoCollectInterval: 10
    },


  

    
    // Przechowywanie slotów dla każdej lokacji
    locationSlots: {
        park: [
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0}
        ],
        lake: [
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0}
        ]
    },
    
    // Odblokowane sloty dla każdej lokacji
    locationUnlockedSlots: {
        park: [true, true, false, false, false],
        lake: [true, true, false, false, false]
    },
    
    // Dla kompatybilności z istniejącym kodem - te pola będą używane jako aliasy do aktualnej lokacji
    get birdSlots() {
        return this.locationSlots[this.locations.currentLocation] || this.locationSlots.park;
    },
    
    get unlockedSlots() {
        return this.locationUnlockedSlots[this.locations.currentLocation] || this.locationUnlockedSlots.park;
    },
    
    get birdCosts() {
        return this.locations.configs[this.locations.currentLocation]?.birdCosts || this.locations.configs.park.birdCosts;
    },
    
    get birdTimes() {
        return this.locations.configs[this.locations.currentLocation]?.birdTimes || this.locations.configs.park.birdTimes;
    },
    
    get birdRewards() {
        return this.locations.configs[this.locations.currentLocation]?.birdRewards || this.locations.configs.park.birdRewards;
    },
    
    // Rozszerzony system lokacji
    locations: {
        currentLocation: "park",
        unlockedLocations: {
            park: true,
            lake: false
        },
        
        // Pełna konfiguracja dla każdej lokacji
        configs: {
            park: {
                name: "Park Miejski",
                background: "assets/images/feed-bg.jpg",
                unlockCost: 0,
                slotUnlockCosts: [0, 0, 50, 200, 500],
                birdImages: {
    common: "./assets/images/common-bird.png",
    rare: "./assets/images/rare-bird.png",
    epic: "./assets/images/epic-bird.png",
    legendary: "./assets/images/legendary-bird.png",
    mythical: "./assets/images/mythical-bird.png"
},
                birdCosts: {
                    common: 2,
                    rare: 5,
                    epic: 10,
                    legendary: 50,
                    mythical: 0 // Koszt 0, bo mityczne ptaki używają owoców zamiast ziarenek
                },
                birdTimes: {
                    common: 30,
                    rare: 60,
                    epic: 120,
                    legendary: 600,
                    mythical: 10800
                },
                birdRewards: {
                    common: 1,
                    rare: 3,
                    epic: 5,
                    legendary: 15,
                    mythical: 40
                },
                spawnChances: {
                    common: 0.50,   // 50% szans
    rare: 0.30,     // 30% szans
    epic: 0.154,     // 15,4% szans
    legendary: 0.04, // 4% szans
    mythical: 0.006   // 0,6% szans na mitycznego ptaka!
},
                birdCatalogMapping: {
                    common: "common_sparrow",
                    rare: "rare_robin",
                    epic: "epic_cardinal",
                    legendary: "legendary_phoenix",
                    mythical: "mythical_eagle"
                }
            },
            lake: {
                name: "Brzeg Jeziora",
                background: "assets/images/lake-bg.jpg",
                unlockCost: 300,
                slotUnlockCosts: [0, 0, 75, 300, 750],
                birdImages: {
    common: "./assets/images/lake-common.png",
    rare: "./assets/images/lake-rare.png",
    epic: "./assets/images/lake-epic.png",
    legendary: "./assets/images/lake-legendary.png",
    mythical: "./assets/images/lake-mythical.png"
},
                birdCosts: {
                    common: 10,
                    rare: 25,
                    epic: 50,
                    legendary: 150,
                    mythical: 0 // Koszt 0, bo mityczne ptaki używają owoców zamiast ziarenek
                },
                birdTimes: {
                    common: 60,
                    rare: 300,
                    epic: 600,
                    legendary: 900,
                    mythical: 21600
                },
                birdRewards: {
                    common: 2,
                    rare: 5,
                    epic: 10,
                    legendary: 25,
                    mythical: 60
                },
                spawnChances: {
                    common: 0.40,
                        rare: 0.35,
                        epic: 0.185,
                        legendary: 0.064,
                        mythical: 0.001
},
                birdCatalogMapping: {
                    common: "common_duck",
                    rare: "rare_heron",
                    epic: "epic_swan",
                    legendary: "legendary_pelican",
                    mythical: "mythical_kraken"
                }
            }
        }
    },
    
    // Katalog odkrytych ptaków dla każdej lokacji
    discoveredBirds: {
        park: {
            common_sparrow: true,  // Na start odkryty jest wróbel
            rare_robin: false,
            epic_cardinal: false,
            legendary_phoenix: false,
            mythical_eagle: false
        },
        lake: {
            common_duck: false,
            rare_heron: false,
            epic_swan: false,
            legendary_pelican: false,
            mythical_kraken: false
        }
    },




 // NOWA STRUKTURA: Dekoracje dla lokacji
 decorations: {
        park: {
            bench: { 
                owned: false, 
                id: "bench",
                name: "Ławka w parku", 
                description: "Urocza ławka na której siadają goście parku",
                price: 0.01, 
                image: "assets/images/decorations/park-bench.png",
                thumbnailImage: "assets/images/decorations/park-bench-small.png",
                bonus: { type: "feedCost", value: 10 }  // 10% zniżki na koszt karmienia
            },
            fountain: { 
                owned: false, 
                id: "fountain",
                name: "Fontanna", 
                description: "Piękna fontanna przyciągająca większe ptaki",
                price: 0.01, 
                image: "assets/images/decorations/park-fountain.png",
                thumbnailImage: "assets/images/decorations/park-fountain-small.png",
                bonus: { type: "reward", value: 10 }  // 10% więcej monet
            },
            balloon: { 
                owned: false, 
                id: "balloon",
                name: "Balon wycieczkowy", 
                description: "Kolorowy balon, dzięki któremu ptaki szybciej się najadają",
                price: 0.05, 
                image: "assets/images/decorations/park-balloon.png",
                thumbnailImage: "assets/images/decorations/park-balloon-small.png",
                bonus: { type: "feedTime", value: 10 }  // 10% szybsze karmienie
            }
        },
        lake: {
            // Placeholder dla przyszłych dekoracji jeziora
        }
    },




        upgrades: {
            autoCapacity: 0,
            autoSpeed: 0
        },
        missions: [],
        weeklyMissions: [], // Nowa tablica na misje tygodniowe
        achievements: [],
        stats: {
            totalSeedsCollected: 0,
            totalBirdsFed: 0,
            totalBirdsScared: 0,
            totalCoinsEarned: 0
        },
       
        
        lastWeeklyCheck: null, // Nowa właściwość do śledzenia resetu tygodniowego
        petBird: {
    exists: false,
    name: "",
    stage: "egg",
    level: 1,           // NOWE POLE
    experience: 0,      // NOWE POLE
    hunger: 10,
    happiness: 10,
    cleanliness: 10,
    lastUpdate: Date.now()
},









// W strukturze gameState dodaj (jeśli edytujesz istniejący gameState, dodaj te pola):
rewardPass: {
    distance: 0,
    hasPremium: false,
    lastUpdate: Date.now(),
    endTime: Date.now() + (30 * 24 * 60 * 60 * 1000), // 30 dni od teraz
    claimedRewards: {
        free: [],
        premium: []
    }
}



    };
    
    // Funkcja pokazująca powiadomienie - przeniesiona do globalnej przestrzeni
    function showNotification(message) {
        console.log("Pokazuję powiadomienie:", message);
        // Sprawdź, czy istnieje już element powiadomienia
        let notification = document.querySelector('.notification');
        
        // Jeśli nie istnieje, utwórz nowy
        if (!notification) {
            notification = document.createElement('div');
            notification.className = 'notification';
            document.body.appendChild(notification);
        }
        
        // Aktualizuj treść i pokaż powiadomienie
        notification.textContent = message;
        notification.classList.add('show');
        
        // Ukryj powiadomienie po 3 sekundach
        setTimeout(() => {
            notification.classList.remove('show');
        }, 3000);
    }





// Funkcja pokazująca animację nagrody
function showRewardAnimation(text, element) {
    if (!element) return;
    
    const animation = document.createElement('div');
    animation.className = 'reward-animation';
    animation.textContent = text;
    
    // Pozycjonuj animację nad elementem
    const rect = element.getBoundingClientRect();
    animation.style.left = rect.left + rect.width / 2 + 'px';
    animation.style.top = rect.top + 'px';
    
    document.body.appendChild(animation);
    
    // Usuń element po zakończeniu animacji
    setTimeout(() => {
        if (animation.parentNode) {
            animation.parentNode.removeChild(animation);
        }
    }, 3200);
}
    
// Funkcja formatująca liczby z separatorem dziesiętnym odpowiednim dla języka polskiego
function formatNumber(number, decimals = 2) {
    // Upewnij się, że mamy liczbę
    if (typeof number !== 'number') {
        number = parseFloat(number) || 0;
    }
    
    // Formatuj liczbę z odpowiednią liczbą miejsc po przecinku
    const formatted = decimals > 0 ? number.toFixed(decimals) : number.toString();
    
    // Zamień kropkę na przecinek (format polski)
    return formatted.replace('.', ',');
}






function updateUI() {
    // Użyj requestAnimationFrame aby wymusić szybszą aktualizację UI
    requestAnimationFrame(() => {
        // Aktualizuj liczniki zasobów
        document.getElementById('seed-count').textContent = gameState.resources.seeds;
        document.getElementById('coin-count').textContent = formatNumber(gameState.resources.coins, 1);
        document.getElementById('fruit-count').textContent = formatNumber(gameState.resources.fruits, 2);
        document.getElementById('ton-count').textContent = formatNumber(gameState.resources.ton || 0.000, 3);
        
        // Aktualizuj poziom gracza i pasek XP na głównym ekranie
        const xpPercentage = (gameState.player.xp / gameState.player.nextLevelXp) * 100;
        document.getElementById('main-xp-progress-bar').style.width = `${xpPercentage}%`;
        
        // Aktualizacja za pomocą systemu tłumaczeń
        const levelBadgeSpan = document.querySelector('.main-level-badge span');
        if (levelBadgeSpan) {
            levelBadgeSpan.textContent = t('mainScreen.level', {level: gameState.player.level});
            levelBadgeSpan.setAttribute('data-i18n-values', JSON.stringify({level: gameState.player.level}));
        }
        
        const xpTextSpan = document.querySelector('.main-xp-text span');
        if (xpTextSpan) {
            xpTextSpan.textContent = t('mainScreen.xp', {current: gameState.player.xp, next: gameState.player.nextLevelXp});
            xpTextSpan.setAttribute('data-i18n-values', JSON.stringify({current: gameState.player.xp, next: gameState.player.nextLevelXp}));
        }
        
        // Aktualizuj auto-zbieracza
        const autoCountElement = document.getElementById('auto-count');
        const autoLimitElement = document.getElementById('auto-limit');
        
        if (autoCountElement && autoLimitElement) {
            autoCountElement.textContent = gameState.resources.autoSeedAmount;
            autoLimitElement.textContent = gameState.resources.autoCollectLimit;
        }
    });
}






// Funkcja zapisująca stan gry
function saveGame() {
    try {
        // Zapisz znacznik czasu ostatniego zapisu
        gameState.lastSaveTime = Date.now(); 
        
        // Zachowaj kopię dystansu przepustki i statusu premium
        if (gameState.rewardPass) {
            localStorage.setItem('rewardPassDistance', gameState.rewardPass.distance.toString());
            localStorage.setItem('rewardPassPremium', gameState.rewardPass.hasPremium ? '1' : '0');
        }
        
        // Główny zapis stanu gry
        localStorage.setItem('dziubCoinsGame', JSON.stringify(gameState));
    } catch (e) {
        console.error("Błąd podczas zapisywania stanu gry:", e);
    }
}



// Funkcja wczytująca stan gry
function loadGame() {
    console.log("Wczytywanie stanu gry z index.html...");
    try {
        // Pobierz zapisaną grę z localStorage
        const savedGame = localStorage.getItem('dziubCoinsGame');
        
        if (savedGame) {
            console.log("Znaleziono zapisaną grę!");
            
            // Parsuj zapisany stan gry
            const parsedGame = JSON.parse(savedGame);
            
            // Zachowaj kopię pierwotnego gameState na wszelki wypadek
            const originalGameState = JSON.parse(JSON.stringify(window.gameState));
            
            // Aktualizuj gameState danymi z zapisanej gry
            window.gameState = parsedGame;


// POPRAWKA: Sprawdź aktualny skin w localStorage
const currentSkin = localStorage.getItem('currentSkin');
if (currentSkin) {
    if (!window.gameState.skins) {
        window.gameState.skins = {
            currentSkin: currentSkin,
            unlockedSkins: ["default"]
        };
    } else {
        window.gameState.skins.currentSkin = currentSkin;
    }
    console.log("Przywrócono skin z localStorage:", currentSkin);
}


            
            // Upewnij się, że niektóre struktury danych istnieją
            if (!window.gameState.skins) {
                window.gameState.skins = {
                    currentSkin: "default",
                    unlockedSkins: ["default"]
                };
            }
            
            if (!window.gameState.locations) {
                window.gameState.locations = originalGameState.locations;
            }
            
            if (!window.gameState.locations.unlockedLocations) {
                window.gameState.locations.unlockedLocations = {
                    park: true,
                    lake: false,
                    forest: false
                };
            }
            
            // Sprawdź zapisany skin
            const savedSkin = localStorage.getItem('currentSkin');
            if (savedSkin && window.gameState.skins) {
                window.gameState.skins.currentSkin = savedSkin;
            }
            
            console.log("Stan gry wczytany pomyślnie!");
            
            // Aktualizuj interfejs użytkownika
            if (typeof updateUI === 'function') {
                updateUI();
            }
            
            return true;
        } else {
            console.log("Nie znaleziono zapisanej gry. Rozpoczynanie z domyślnymi ustawieniami.");
            return false;
        }
    } catch (e) {
        console.error("Błąd podczas wczytywania stanu gry:", e);
        return false;
    }
}

    
// Funkcja emitująca zdarzenie załadowania gry
function emitGameLoaded() {
    console.log('Emitowanie zdarzenia gameLoaded');
    const gameLoadedEvent = new Event('gameLoaded');
    document.dispatchEvent(gameLoadedEvent);
}
</script>

<!-- Zachowujemy właściwą kolejność ładowania skryptów -->
 <script src="js/translations.js"></script>
<script src="js/ui.js"></script>
<script src="js/game.js"></script>
<script src="js/telegram.js"></script>
<script src="js/locations.js"></script>
<script src="js/location-actions.js"></script>
<script src="js/bird-discovery.js"></script>
<script src="js/mythical-birds.js"></script>
<script src="js/breeding-fix.js"></script>
<script src="js/sorting-game.js"></script>
<script src="js/shop.js"></script>
<script src="js/reward-fix.js"></script>
<script src="js/expeditions.js"></script>
<script src="js/reward-pass.js"></script>
<script src="js/wardrobe.js"></script>
<script src="js/sound.js"></script>
<script src="js/daily-rewards.js"></script>
<script src="js/referral.js"></script>
<script src="js/catalog-data-updater.js"></script>
<script src="js/skin-grayscale.js"></script>




<!-- Dodatkowy skrypt, który zapewnia inicjalizację -->
<script>
    window.addEventListener('load', function() {
      // Upewnij się, że katalog ptaków jest zainicjalizowany
      if (typeof initBirdCatalog === 'function') {
        console.log("Wymuszam inicjalizację katalogu ptaków");
        initBirdCatalog();
      } else {
        console.error("Funkcja initBirdCatalog niedostępna!");
      }
    });
</script>


<script>
// Wywołaj przy ładowaniu strony
window.addEventListener('load', function() {
    // Najpierw wczytaj zapisaną grę
    if (typeof loadGame === 'function') {
        loadGame();
    }
    
    // Następnie skonfiguruj ekran zabawy
    setupPlayScreen();
});
</script>



<!-- Dodatkowy skrypt naprawczy dla nowych slotów -->
<script>
// Dodatkowa funkcja do naprawy slotów 4 i 5 przy ładowaniu
window.addEventListener('load', function() {
    setTimeout(function() {
        console.log("Uruchamiam skrypt naprawczy dla nowych slotów");
        // Sprawdź sloty 3 i 4 (czwarty i piąty)
        [3, 4].forEach(function(slotIndex) {
            // Sprawdź, czy slot jest odblokowany
            if (gameState.unlockedSlots[slotIndex]) {
                console.log(`Slot ${slotIndex} jest odblokowany - naprawiam UI`);
                // Znajdź element slotu
                const slotElement = document.querySelector(`.bird-slot[data-slot="${slotIndex}"]`);
                if (slotElement) {
                    // Usuń klasę locked
                    slotElement.classList.remove('locked');
                    // Ukryj elementy odblokowania
                    const lockIcon = slotElement.querySelector('.lock-icon');
                    const unlockButton = slotElement.querySelector('.unlock-button');
                    const unlockText = slotElement.querySelector('p:not(.bird-timer)');
                    if (lockIcon) lockIcon.style.display = 'none';
                    if (unlockButton) unlockButton.style.display = 'none';
                    if (unlockText) unlockText.style.display = 'none';
                    // Reinicjalizuj przyciski
                    const feedButton = slotElement.querySelector('.feed-button');
                    const scareButton = slotElement.querySelector('.scare-button');
                    const collectButton = slotElement.querySelector('.collect-reward-button');
                    if (feedButton) {
                        feedButton.onclick = function() {
                            feedBird(slotIndex);
                        };
                    }
                    if (scareButton) {
                        scareButton.onclick = function() {
                            scareBird(slotIndex);
                        };
                    }
                    if (collectButton) {
                        collectButton.onclick = function() {
                            collectBirdReward(slotIndex);
                        };
                    }
                    // Sprawdź czy slot ma ptaka, jeśli nie, spróbuj go wygenerować
                    if (!gameState.birdSlots[slotIndex].isActive) {
                        console.log(`Slot ${slotIndex} nie ma aktywnego ptaka - generuję ptaka`);
                        trySpawnBirdInSlot(slotIndex);
                    }
                    // Aktualizuj UI
                    updateBirdSlotUI(slotElement, slotIndex);
                }
            }
        });
    }, 1000); // Daj czas na załadowanie innych skryptów
});

// Dodaj obsługę przycisku resetowania gry
window.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        const resetButton = document.getElementById('reset-game-button');
        if (resetButton) {
            resetButton.addEventListener('click', function() {
                if (confirm(t('general.confirmReset'))) {
                    localStorage.removeItem('dziubCoinsGame');
                    showNotification(t('general.gameReset'));
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                }
            });
        }
    }, 500);
});
</script>

<!-- Dodatkowy skrypt naprawiający problemy -->
<script>
// Naprawianie potencjalnych problemów po załadowaniu strony
window.addEventListener('load', function() {
    console.log("Uruchamiam skrypt naprawczy");
    
    // Sprawdź, czy przyciski nawigacji działają
    setTimeout(function() {
        // Dodaj bezpośrednią obsługę przycisków nawigacji jako zabezpieczenie
        document.querySelectorAll('.nav-button').forEach(button => {
            button.onclick = function() {
                const screenId = this.getAttribute('data-screen');
                console.log("Kliknięto przycisk nawigacji: " + screenId);
                
                // Ukryj wszystkie ekrany
                document.querySelectorAll('.game-screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                
                // Pokaż wybrany ekran
                const targetScreen = document.getElementById(screenId);
                if (targetScreen) {
                    targetScreen.classList.add('active');
                    console.log("Aktywowano ekran: " + screenId);
                    
                    // Jeśli przejście do ekranu ptaków, sprawdź sloty
                    if (screenId === 'feed-screen') {
                        if (typeof setupBirdSlots === 'function') {
                            setupBirdSlots();
                        }
                    }
                    
                    // Jeśli przejście do ekranu hodowli
                    if (screenId === 'breeding-screen') {
                        if (typeof setupBreedingScreen === 'function') {
                            setupBreedingScreen();
                        }
                    }
                }
            };
        });
        
        // Sprawdź, czy istnieje aktywny ekran, jeśli nie, aktywuj główny
        const activeScreen = document.querySelector('.game-screen.active');
        if (!activeScreen) {
            const mainScreen = document.getElementById('main-screen');
            if (mainScreen) {
                mainScreen.classList.add('active');
                console.log("Naprawiono - brak aktywnego ekranu");
            }
        }
        
    }, 1000);
});
</script>






<!-- Wywołanie zdarzenia gameLoaded po załadowaniu strony -->
<script>
// Wywołaj funkcję po krótkiej przerwie, aby upewnić się, że gameState jest już załadowany
window.addEventListener('load', function() {
    setTimeout(function() {
        emitGameLoaded();
        // Aktualizuj tłumaczenia katalogu ptaków po załadowaniu gry
        if (typeof updateBirdCatalogTranslations === 'function') {
            updateBirdCatalogTranslations();
        }
    }, 1000);
});
</script>







<script>
// Dodatkowa obsługa przycisku kupna jajka
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        const hatchButton = document.getElementById('hatch-pet-button');
        if (hatchButton) {
            console.log("Dodaję dedykowany handler dla przycisku kupna jajka");
            
            // Upewnij się, że gameState istnieje w window
            if (!window.gameState) {
                console.error("UWAGA: gameState nie jest dostępny w window!");
                window.gameState = gameState; // Przypisujemy lokalny gameState do window
            }
            
            // NAPRAWNE: używamy event capture i różne metody jednocześnie
            hatchButton.addEventListener('click', handleHatchButton, { capture: true });
            hatchButton.addEventListener('mousedown', handleHatchButton, { capture: true });
            hatchButton.addEventListener('touchstart', handleHatchButton, { capture: true });
            
            // NAPRAWNE: dodajemy też stary sposób
            hatchButton.onclick = handleHatchButton;
            
            function handleHatchButton(e) {
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                console.log("Przycisk kupna jajka kliknięty");
                
                // Sprawdź dostępne funkcje
                if (typeof window.buyNewEgg === 'function') {
                    console.log("Używam window.buyNewEgg");
                    window.buyNewEgg();
                } else if (typeof window.getNewEgg === 'function') {
                    console.log("Używam window.getNewEgg");
                    window.getNewEgg();
                } else if (window.BreedingModule && typeof window.BreedingModule.getNewEgg === 'function') {
                    console.log("Używam BreedingModule.getNewEgg");
                    window.BreedingModule.getNewEgg();
                } else {
                    console.error("Nie można znaleźć funkcji kupna jajka!");
                    
                    // Implementacja awaryjna
                    console.log("Używam implementacji awaryjnej kupna jajka");
                    const eggCost = 5;
                    
                    // Sprawdź dostępny gameState
                    const gs = window.gameState || gameState;
                    
                    if (gs.petBird && gs.petBird.exists) {
                        showNotification(t('breeding.alreadyHaveEgg'));
                        return;
                    }
                    
                    if (gs.resources.coins >= eggCost) {
                        gs.resources.coins -= eggCost;
                        
                        gs.petBird = {
                            exists: true,
                            name: t('breeding.chickName'),
                            stage: "egg",
                            age: 1,
                            hunger: 10,
                            happiness: 10,
                            cleanliness: 10,
                            growth: 0,
                            lastUpdate: Date.now()
                        };
                        
                        showNotification(t('breeding.eggPurchased'));
                        updateUI();
                        if (typeof updatePetBirdUI === 'function') {
                            updatePetBirdUI();
                        }
                        if (typeof saveGame === 'function') {
                            saveGame();
                        }
                    } else {
                        showNotification(t('breeding.notEnoughCoins', {amount: eggCost}));
                    }
                }
            }
        }
    }, 1000);
});
</script>

<!-- Dodaj ten skrypt na końcu index.html, tuż przed zamykającym tagiem body -->
<script>
// Funkcja pomocnicza do diagnostyki stanu lokacji
window.checkLocationState = function() {
    console.log("=== SPRAWDZENIE STANU LOKACJI ===");
    if (window.gameState && window.gameState.locations && window.gameState.locations.unlockedLocations) {
        console.log("Odblokowane lokacje:", window.gameState.locations.unlockedLocations);
        return window.gameState.locations.unlockedLocations;
    } else {
        console.error("Brak danych o lokacjach!");
        return null;
    }
};

// Inicjalizacja przy ładowaniu strony
window.addEventListener('load', function() {
    console.log("Uruchamiam dodatkową inicjalizację lokacji...");
    
    // Sprawdź stan początkowy
    const initialState = window.checkLocationState();
    console.log("Stan początkowy:", initialState);
    
    // Odczyt danych z localStorage
    try {
        const savedGame = localStorage.getItem('dziubCoinsGame');
        if (savedGame) {
            const parsedSave = JSON.parse(savedGame);
            
            if (parsedSave.locations && parsedSave.locations.unlockedLocations) {
                console.log("Stan w localStorage:", parsedSave.locations.unlockedLocations);
                
                // Upewnij się, że dane z localStorage są załadowane
                if (window.gameState && window.gameState.locations) {
                    console.log("Synchronizuję stan z localStorage");
                    window.gameState.locations.unlockedLocations = {...parsedSave.locations.unlockedLocations};
                }
            }
        }
    } catch (e) {
        console.error("Błąd podczas odczytu z localStorage:", e);
    }
    
    // Wykonaj inicjalizację z opóźnieniem
    setTimeout(function() {
        // Jeszcze raz sprawdź stan
        const currentState = window.checkLocationState();
        console.log("Stan po inicjalizacji:", currentState);
        
        // Wymuś aktualizację UI mapy
        if (typeof window.updateMapUI === 'function') {
            console.log("Uruchamiam wymuszenie aktualizacji UI mapy");
            window.updateMapUI();
        }
        
        // Dodaj obsługę przycisków odblokowania lokacji
        if (typeof window.setupUnlockLocationButtons === 'function') {
            console.log("Uruchamiam wymuszenie konfiguracji przycisków odblokowania");
            window.setupUnlockLocationButtons();
        }
        
        // Dodaj bezpośrednią obsługę przycisku odblokowania jeziora
        const lakeUnlockButton = document.querySelector('.unlock-location-button[data-location="lake"]');
        if (lakeUnlockButton) {
            console.log("Znaleziono przycisk odblokowania jeziora - dodaję bezpośredni handler");
            
            lakeUnlockButton.onclick = function() {
                console.log("Kliknięto przycisk odblokowania jeziora (bezpośredni handler)");
                
                // Upewnij się, że struktury istnieją
                if (!window.gameState.locations) {
                    window.gameState.locations = {};
                }
                
                if (!window.gameState.locations.unlockedLocations) {
                    window.gameState.locations.unlockedLocations = { park: true };
                }
                
                // Pobierz koszt z konfiguracji lub ustaw domyślny
                const locationCost = window.gameState.locations.configs?.lake?.unlockCost || 10;
                
                // Sprawdź monety
                if (window.gameState.resources.coins >= locationCost) {
                    // Odejmij monety
                    window.gameState.resources.coins -= locationCost;
                    
                    // Odblokuj lokację
                    window.gameState.locations.unlockedLocations.lake = true;
                    
                    // Pokazuj komunikat
                    if (typeof window.showNotification === 'function') {
                        window.showNotification(t('locations.unlockSuccess', {location: t('locations.lakeName')}));
                    }
                    
                    // Zapisz stan gry
                    if (typeof window.saveGame === 'function') {
                        window.saveGame();
                    } else {
                        localStorage.setItem('dziubCoinsGame', JSON.stringify(window.gameState));
                    }
                    
                    // Aktualizuj UI
                    if (typeof window.updateMapUI === 'function') {
                        window.updateMapUI();
                    }
                    
                    console.log("Odblokowano lokację jeziora:", window.gameState.locations.unlockedLocations);
                    
                    // Przeładuj stronę, aby upewnić się, że zmiany zostaną zastosowane
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                    // Za mało monet
                    if (typeof window.showNotification === 'function') {
                        window.showNotification(t('general.notEnoughCoins', {amount: locationCost}));
                    }
                }
            };
        }
        
    }, 1500); // Dłuższe opóźnienie dla pewności
});
</script>






<!-- Dodatkowa inicjalizacja przycisku katalogu ptaków -->
<script>
    // Funkcja inicjalizująca przycisk katalogu ptaków
    function initBirdCatalogButton() {
        console.log("Inicjalizacja przycisku katalogu ptaków");
        const catalogButton = document.getElementById('bird-catalog-button');
        if (catalogButton) {
            // Usuń poprzednie event listenery
            const newButton = catalogButton.cloneNode(true);
            catalogButton.parentNode.replaceChild(newButton, catalogButton);
            
            // Dodaj nowy event listener
            newButton.addEventListener('click', function() {
                console.log("Kliknięto przycisk katalogu ptaków");
                if (typeof window.showBirdCatalog === 'function') {
                    window.showBirdCatalog();
                } else if (typeof showBirdCatalog === 'function') {
                    showBirdCatalog();
                } else {
                    console.error("Funkcja showBirdCatalog jest niedostępna!");
                    // Alternatywna implementacja
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.classList.remove('active');
                    });
                    const catalogScreen = document.getElementById('bird-catalog-screen');
                    if (catalogScreen) {
                        catalogScreen.classList.add('active');
                        console.log("Pokazuję ekran katalogu ptaków (awaryjnie)");
                        // Próba wypełnienia katalogu
                        if (typeof window.populateBirdCatalog === 'function') {
                            window.populateBirdCatalog();
                        }
                    }
                }
            });
        } else {
            console.error("Przycisk katalogu ptaków nie znaleziony!");
        }
    }
    
    // Wywołaj funkcję po załadowaniu strony i po każdej zmianie lokacji
    window.addEventListener('load', function() {
        setTimeout(initBirdCatalogButton, 1000);
    });
    
    // Ponownie inicjalizuj przy każdym wywołaniu zdarzenia gameLoaded
    document.addEventListener('gameLoaded', function() {
        setTimeout(initBirdCatalogButton, 500);
    });
</script>









<!-- Skrypt do sprawdzania odblokowania lokacji Jezioro -->
<script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        console.log("Sprawdzanie stanu odblokowania lokacji Brzeg Jeziora");
        
        // Sprawdź, czy lokacja Jezioro jest odblokowana
        const isLakeUnlocked = window.gameState && 
                               window.gameState.locations && 
                               window.gameState.locations.unlockedLocations && 
                               window.gameState.locations.unlockedLocations.lake;
        
        console.log("Lokacja Brzeg Jeziora odblokowana:", isLakeUnlocked);
        
        // Znajdź element lokacji Jezioro w katalogu
        const catalogLocations = document.querySelectorAll('.catalog-location');
        let lakeCatalogLocation = null;
        
        // Szukamy lokacji Brzeg Jeziora po nazwie
        catalogLocations.forEach(function(location) {
          const locationName = location.querySelector('.location-name');
          if (locationName && locationName.textContent === 'Brzeg Jeziora') {
            lakeCatalogLocation = location;
          }
        });
        
        if (lakeCatalogLocation) {
          console.log("Znaleziono element lokacji Brzeg Jeziora w katalogu");
          
          // Jeśli lokacja nie jest odblokowana, dodaj informację o tym
          if (!isLakeUnlocked) {
            // Usuń siatkę ptaków
            const birdGrid = lakeCatalogLocation.querySelector('.bird-grid');
            if (birdGrid) {
              birdGrid.remove();
            }
            
            // Dodaj informację o odblokowaniu
            const lockInfo = document.createElement('div');
            lockInfo.className = 'location-lock-info';
            lockInfo.textContent = 'Odblokuj tę lokację za 10 DziubCoinów w menu Mapy!';
            lakeCatalogLocation.appendChild(lockInfo);
            
            // Dodaj klasę dla zablokowanej lokacji
            lakeCatalogLocation.classList.add('location-locked');
            
            // Zmień status na "Zablokowane"
            const statusElement = lakeCatalogLocation.querySelector('.location-status');
            if (statusElement) {
              statusElement.textContent = 'Zablokowane';
            }
          }
        } else {
          console.log("Nie znaleziono elementu lokacji Brzeg Jeziora w katalogu");
        }
      }, 2000);
    });
  </script>




<!-- Skrypt odpowiedzialny tylko za stan odblokowania Brzegu Jeziora -->
<script>
    // Funkcja sprawdzająca stan odblokowania Jeziora
    function checkLakeUnlocking() {
      console.log("Sprawdzanie odblokowania lokacji Brzeg Jeziora");
      
      // Sprawdź czy lokacja jest odblokowana
      const isLakeUnlocked = window.gameState && 
                             window.gameState.locations && 
                             window.gameState.locations.unlockedLocations && 
                             window.gameState.locations.unlockedLocations.lake === true;
      
      console.log("Lokacja Brzeg Jeziora jest odblokowana:", isLakeUnlocked);
      
      // Znajdź elementy lokacji jeziora
      const lakeCatalog = document.getElementById('lake-catalog');
      if (!lakeCatalog) {
        console.error("Nie znaleziono elementu lake-catalog!");
        return;
      }
      
      // Pobierz elementy do modyfikacji
      const lockInfo = lakeCatalog.querySelector('.location-lock-info');
      const birdGrid = lakeCatalog.querySelector('.bird-grid');
      const statusElement = lakeCatalog.querySelector('.location-status');
      
      if (isLakeUnlocked) {
        // Jeśli lokacja jest odblokowana
        console.log("Pokazuję ptaki z Brzegu Jeziora");
        lakeCatalog.classList.remove('location-locked');
        
        if (lockInfo) lockInfo.style.display = 'none';
        if (birdGrid) birdGrid.style.display = 'grid';
        if (statusElement) statusElement.textContent = 'Odblokowane';
      } else {
        // Jeśli lokacja jest zablokowana
        console.log("Ukrywam ptaki z Brzegu Jeziora");
        lakeCatalog.classList.add('location-locked');
        
        if (lockInfo) lockInfo.style.display = 'block';
        if (birdGrid) birdGrid.style.display = 'none';
        if (statusElement) statusElement.textContent = 'Zablokowane';
      }
    }
    
    // Wywołaj funkcję przy załadowaniu strony
    window.addEventListener('load', function() {
      setTimeout(checkLakeUnlocking, 1000);
    });
    
    // Wywołaj funkcję przy każdym otwarciu katalogu
    document.getElementById('bird-catalog-button').addEventListener('click', function() {
      setTimeout(checkLakeUnlocking, 300);
    });
    
    // Wywołaj funkcję przy zdarzeniu gameLoaded
    document.addEventListener('gameLoaded', function() {
      setTimeout(checkLakeUnlocking, 500);
    });
  </script>






<!-- Funkcja aktualizacji tłumaczeń katalogu ptaków - NAPRAWIONA -->
<script>
    function updateBirdCatalogTranslations() {
        console.log("Aktualizuję tłumaczenia katalogu ptaków");
        
        // Znajdź wszystkie elementy z data-i18n w katalogu
        const catalogScreen = document.getElementById('bird-catalog-screen');
        if (catalogScreen) {
            const elementsToTranslate = catalogScreen.querySelectorAll('[data-i18n]');
            console.log(`Znaleziono ${elementsToTranslate.length} elementów do przetłumaczenia`);
            
            elementsToTranslate.forEach(element => {
                const translationKey = element.getAttribute('data-i18n');
                const translationValues = element.getAttribute('data-i18n-values');
                
                if (translationKey && typeof t === 'function') {
                    try {
                        let translatedText;
                        if (translationValues) {
                            const values = JSON.parse(translationValues);
                            translatedText = t(translationKey, values);
                        } else {
                            translatedText = t(translationKey);
                        }
                        
                        // Sprawdź czy tłumaczenie się powiodło
                        if (translatedText && translatedText !== translationKey) {
                            element.textContent = translatedText;
                            console.log(`Przetłumaczono: ${translationKey} -> ${translatedText}`);
                        } else {
                            console.warn(`Brak tłumaczenia dla klucza: ${translationKey}`);
                        }
                    } catch (error) {
                        console.warn("Błąd tłumaczenia:", translationKey, error);
                    }
                }
            });
        }
    }
    
    // Dodaj funkcję do globalnego zakresu
    window.updateBirdCatalogTranslations = updateBirdCatalogTranslations;
    
    // NOWE: Wymuś aktualizację tłumaczeń przy każdym uruchomieniu gry
    window.addEventListener('load', function() {
        // Pierwsze wywołanie po 2 sekundach
        setTimeout(function() {
            if (typeof updateBirdCatalogTranslations === 'function') {
                console.log("Wymuszam pierwsze tłumaczenie katalogu przy starcie gry");
                updateBirdCatalogTranslations();
            }
        }, 2000);
        
        // Drugie wywołanie po 4 sekundach (dla pewności)
        setTimeout(function() {
            if (typeof updateBirdCatalogTranslations === 'function') {
                console.log("Wymuszam drugie tłumaczenie katalogu przy starcie gry");
                updateBirdCatalogTranslations();
            }
        }, 4000);
    });
    
    // NOWE: Dodatkowe wywołanie po zdarzeniu gameLoaded
    document.addEventListener('gameLoaded', function() {
        setTimeout(function() {
            if (typeof updateBirdCatalogTranslations === 'function') {
                console.log("Wymuszam tłumaczenie katalogu po załadowaniu gry");
                updateBirdCatalogTranslations();
            }
        }, 1000);
    });
</script>





<!-- Uproszczona obsługa przycisku katalogu ptaków -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Uproszczona inicjalizacja przycisku katalogu ptaków");
            
       
            

// Przycisk katalogu
const catalogButton = document.getElementById('bird-catalog-button');
if (catalogButton) {


    
    catalogButton.onclick = function() {
    // Ukryj wszystkie ekrany
    document.querySelectorAll('.game-screen').forEach(screen => {
        screen.classList.remove('active');
    });
    
    // Pokaż ekran katalogu
    const catalogScreen = document.getElementById('bird-catalog-screen');
    if (catalogScreen) {
        catalogScreen.classList.add('active');
        
        // NATYCHMIASTOWA aktualizacja tłumaczeń
        if (typeof updateBirdCatalogTranslations === 'function') {
            console.log("Aktualizuję tłumaczenia przy otwieraniu katalogu");
            updateBirdCatalogTranslations();

            // Aktualizuj także teksty z odmianą
if (typeof updateCatalogTexts === 'function') {
    updateCatalogTexts();
}
        }
        
        // DODATKOWA aktualizacja z małym opóźnieniem
        setTimeout(function() {
            if (typeof updateBirdCatalogTranslations === 'function') {
                console.log("Dodatkowa aktualizacja tłumaczeń katalogu");
                updateBirdCatalogTranslations();
            }
        }, 300);
        
        // Sprawdź stan odblokowania Jeziora
        if (typeof checkLakeUnlocking === 'function') {
            checkLakeUnlocking();
        }
    }
};
}


            
            // Przycisk powrotu
            const backButton = document.getElementById('catalog-back-button');
            if (backButton) {
                backButton.onclick = function() {
                    // Ukryj wszystkie ekrany
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.classList.remove('active');
                    });
                    
                    // Pokaż ekran karmienia
                    const feedScreen = document.getElementById('feed-screen');
                    if (feedScreen) {
                        feedScreen.classList.add('active');
                    }
                      // Zastosuj dekoracje po powrocie do ekranu karmienia
        if (typeof applyDecorations === 'function') {
            applyDecorations(gameState.locations.currentLocation);
        }
                };
            }



// Przycisk powrotu ze sklepu
const shopBackButton = document.getElementById('shop-back-button');
if (shopBackButton) {
    shopBackButton.onclick = function() {
        // Ukryj wszystkie ekrany
        document.querySelectorAll('.game-screen').forEach(screen => {
            screen.classList.remove('active');
        });
        
        // Pokaż ekran karmienia
        const feedScreen = document.getElementById('feed-screen');
        if (feedScreen) {
            feedScreen.classList.add('active');
        }
    };
}




        }, 1000);
    });
</script>


<!-- Dodatkowy skrypt dla aktywacji ptaków w katalogu -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Inicjalizacja odkrytych ptaków w katalogu");
            
            // Oznacz domyślnie odkrytego wróbla
            if (gameState && gameState.discoveredBirds && gameState.discoveredBirds.park) {
                gameState.discoveredBirds.park.common_sparrow = true;
                
                // Zapisz stan gry
                if (typeof saveGame === 'function') {
                    saveGame();
                }
            }
            
            // Aktualizuj UI katalogu
            if (typeof updateBirdCatalogDiscovery === 'function') {
                updateBirdCatalogDiscovery();
            }
            
            // Dodaj obserwator zmiany klasy active dla ekranu katalogu
            const catalogScreen = document.getElementById('bird-catalog-screen');
            if (catalogScreen) {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.attributeName === 'class') {
                            if (catalogScreen.classList.contains('active')) {
                                console.log("Wykryto otwarcie katalogu - aktualizuję status odkrytych ptaków");
                                if (typeof updateBirdCatalogDiscovery === 'function') {
                                    updateBirdCatalogDiscovery();
                                }
                            }
                        }
                    });
                });
                
                observer.observe(catalogScreen, { attributes: true });
            }
        }, 2000);
    });
</script>





<!-- Dodatkowy skrypt do testowania i debugowania katalogu ptaków -->
<script>
    // Funkcja testowa do ręcznego odkrywania ptaków
    window.testDiscoverBird = function(birdType, locationId) {
        console.log(`Testowe odkrywanie ptaka typu: ${birdType} w lokacji: ${locationId}`);
        
        // Manualne mapowanie typów na identyfikatory
        let birdId = null;
        if (locationId === 'park') {
            if (birdType === 'common') birdId = 'common_sparrow';
            else if (birdType === 'rare') birdId = 'rare_robin';
            else if (birdType === 'epic') birdId = 'epic_cardinal';
            else if (birdType === 'legendary') birdId = 'legendary_phoenix';
            else if (birdType === 'mythical') birdId = 'mythical_eagle';
        } else if (locationId === 'lake') {
            if (birdType === 'common') birdId = 'common_duck';
            else if (birdType === 'rare') birdId = 'rare_heron';
            else if (birdType === 'epic') birdId = 'epic_swan';
            else if (birdType === 'legendary') birdId = 'legendary_pelican';
            else if (birdType === 'mythical') birdId = 'mythical_kraken';
        }
        
        if (birdId && typeof window.discoverBird === 'function') {
            window.discoverBird(birdId, locationId);
            showNotification(`Test: Odkryto ptaka ${birdId} w lokacji ${locationId}`);
            
            // Otwórz katalog po krótkiej chwili
            setTimeout(function() {
                if (typeof window.showBirdCatalog === 'function') {
                    window.showBirdCatalog();
                }
            }, 500);
        } else {
            showNotification("Nie można odkryć ptaka - funkcja niedostępna lub niepoprawny typ/lokacja");
        }
    };
    
    // Dodaj wywołanie funkcji aktualizującej na otwarcie ekranu katalogu
    document.addEventListener('DOMContentLoaded', function() {
        // Po załadowaniu strony
        setTimeout(function() {
            const catalogButton = document.getElementById('bird-catalog-button');
            if (catalogButton) {
                console.log("Dodaję observer na przycisk katalogu");
                
                // Dodaj nowy listener na onclick (bezpośredni)
                catalogButton.onclick = function() {
                    console.log("Kliknięto przycisk katalogu ptaków - synchronizuję stan");
                    
                    // Poczekaj na pokazanie ekranu i zaktualizuj wygląd ptaków
                    setTimeout(function() {
                        if (typeof window.updateBirdAppearanceDirectly === 'function') {
                            window.updateBirdAppearanceDirectly();
                        }
                    }, 300);
                };
            }
            
            // Sprawdź czy katalogi ptaków istnieją w DOM
            const parkCatalog = document.getElementById('park-catalog');
            const lakeCatalog = document.getElementById('lake-catalog');
            
            console.log("Katalog parku w DOM:", !!parkCatalog);
            console.log("Katalog jeziora w DOM:", !!lakeCatalog);
            
            // Upewnij się, że pierwszy ptak (wróbel) jest zawsze odkryty
            if (!gameState.discoveredBirds || !gameState.discoveredBirds.park) {
                console.log("Inicjalizacja domyślnych odkrytych ptaków");
                if (!gameState.discoveredBirds) gameState.discoveredBirds = {};
                if (!gameState.discoveredBirds.park) gameState.discoveredBirds.park = {};
                gameState.discoveredBirds.park.common_sparrow = true;
                
                // Zapisz stan
                if (typeof saveGame === 'function') {
                    saveGame();
                }
            }
            
            // Aktualizuj stan katalogu
            if (typeof window.updateBirdAppearanceDirectly === 'function') {
                window.updateBirdAppearanceDirectly();
            }
        }, 1000);
    });
</script>



<!-- Integracja aktualizacji katalogu ptaków -->
<script>
    document.getElementById('bird-catalog-button')?.addEventListener('click', function() {
        console.log("Kliknięto przycisk katalogu - uruchamiam aktualizację wyglądu ptaków");
        setTimeout(function() {
            if (typeof updateBirdAppearanceDirectly === 'function') {
                updateBirdAppearanceDirectly();
            } else if (typeof window.updateBirdAppearanceDirectly === 'function') {
                window.updateBirdAppearanceDirectly();
            } else {
                console.warn("Funkcja updateBirdAppearanceDirectly niedostępna!");
            }
        }, 300);
    });
</script>







<!-- Kod naprawiający konfigurację dla Tajemniczego Lasu -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Sprawdzanie konfiguracji lokacji...");
            
            // Upewnij się, że konfiguracja dla "forest" istnieje
            if (!window.gameState || !window.gameState.locations || !window.gameState.locations.configs) {
                console.error("Brak struktur gameState.locations.configs");
            } else {
                if (!window.gameState.locations.configs['forest']) {
                    console.log("Dodaję brakującą konfigurację dla Tajemniczego Lasu");
                    
                    // Dodaj konfigurację, jeśli nie istnieje
                    window.gameState.locations.configs['forest'] = {
                        name: "Tajemniczy Las",
                        background: "assets/images/forest-bg.jpg",
                        unlockCost: 1000,
                        slotUnlockCosts: [0, 100, 350, 500, 1000],
                        birdImages: {
                            common: "./assets/images/forest-common.png",
                            rare: "./assets/images/forest-rare.png",
                            epic: "./assets/images/forest-epic.png",
                            legendary: "./assets/images/forest-legendary.png",
                            mythical: "./assets/images/forest-mythical.png"
                        },
                        birdCosts: {
                            common: 15,
                            rare: 35,
                            epic: 75,
                            legendary: 250,
                            mythical: 0 // Koszt 0, bo mityczne ptaki używają owoców zamiast ziarenek
                        },
                        birdTimes: {
                            common: 180,
                            rare: 450,
                            epic: 900,
                            legendary: 1800,
                            mythical: 43200
                        },
                        birdRewards: {
                            common: 2,
                            rare: 6,
                            epic: 12,
                            legendary: 30,
                            mythical: 70
                        },
                        spawnChances: {
                            common: 0.37,
                        rare: 0.33,
                        epic: 0.20,
                        legendary: 0.098,
                        mythical: 0.002
},
                        birdCatalogMapping: {
                            common: "common_woodpecker",
                            rare: "rare_owl",
                            epic: "epic_hawk",
                            legendary: "legendary_griffin",
                            mythical: "mythical_phoenix"
                        }
                    };
                    
                    // Upewnij się, że inne struktury dla lokacji istnieją
                    if (!window.gameState.locationSlots['forest']) {
                        window.gameState.locationSlots['forest'] = [
                            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
                            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
                            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
                            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0},
                            {isActive: false, birdType: null, isFeeding: false, needsCollection: false, remainingTime: 0}
                        ];
                    }
                    
                    if (!window.gameState.locationUnlockedSlots['forest']) {
                        window.gameState.locationUnlockedSlots['forest'] = [true, true, false, false, false];
                    }
                    
                    if (!window.gameState.discoveredBirds['forest']) {
                        window.gameState.discoveredBirds['forest'] = {
                            common_woodpecker: false,
                            rare_owl: false,
                            epic_hawk: false,
                            legendary_griffin: false,
                            mythical_phoenix: false
                        };
                    }
                    
                    // Upewnij się, że lokacja jest dodana do unlockedLocations (jako zablokowana)
                    window.gameState.locations.unlockedLocations['forest'] = false;
                    
                    // Zapisz stan gry
                    if (typeof window.saveGame === 'function') {
                        window.saveGame();
                    }
                    
                    console.log("Dodano konfigurację dla Tajemniczego Lasu");
                } else {
                    console.log("Konfiguracja dla Tajemniczego Lasu już istnieje");
                }
            }
        }, 2000); // Dłuższe opóźnienie, aby upewnić się, że wszystko jest załadowane
    });
    </script>


<!-- Kod naprawiający obrazki ptaków dla Brzegu Jeziora -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Sprawdzanie i naprawa obrazków ptaków w lokacji Brzeg Jeziora...");
            
            // Upewnij się, że konfiguracja dla "lake" istnieje i ma poprawne ścieżki do obrazków
            if (window.gameState && window.gameState.locations && window.gameState.locations.configs && window.gameState.locations.configs['lake']) {
                console.log("Konfiguracja dla Brzegu Jeziora znaleziona, sprawdzam obrazki...");
                
                // Sprawdź i napraw ścieżki obrazków ptaków
                const lakeConfig = window.gameState.locations.configs['lake'];
                
                // Popraw ścieżki do obrazków jeśli są niepoprawne
                if (lakeConfig.birdImages) {
                    // Stare ścieżki mogły mieć niedziałający format
                    const correctedImages = {
                        common: "./assets/images/lake-common.png",
                        rare: "./assets/images/lake-rare.png",
                        epic: "./assets/images/lake-epic.png",
                        legendary: "./assets/images/lake-legendary.png",
                        mythical: "./assets/images/lake-mythical.png"
                    };
                    
                    // Aktualizuj ścieżki obrazków
                    lakeConfig.birdImages = correctedImages;
                    console.log("Zaktualizowano ścieżki obrazków dla Brzegu Jeziora:", correctedImages);
                    
                    // Napraw obrazki w CSS (dodaj alternatywne klasy)
                    const styleSheet = document.createElement("style");
                    styleSheet.type = "text/css";
                    styleSheet.innerHTML = `
                    /* Dodatkowe alternatywne style dla ptaków z Brzegu Jeziora */
                    .bird-image.lake-common, .lake-common {
                        background-image: url('./assets/images/lake-common.png') !important;
                        background-size: contain !important;
                        background-repeat: no-repeat !important;
                        background-position: center !important;
                    }
                    
                    .bird-image.lake-rare, .lake-rare {
                        background-image: url('./assets/images/lake-rare.png') !important;
                        background-size: contain !important;
                        background-repeat: no-repeat !important;
                        background-position: center !important;
                    }
                    
                    .bird-image.lake-epic, .lake-epic {
                        background-image: url('./assets/images/lake-epic.png') !important;
                        background-size: contain !important;
                        background-repeat: no-repeat !important;
                        background-position: center !important;
                    }
                    
                    .bird-image.lake-legendary, .lake-legendary {
                        background-image: url('./assets/images/lake-legendary.png') !important;
                        background-size: contain !important;
                        background-repeat: no-repeat !important;
                        background-position: center !important;
                    }
                    
                    .bird-image.lake-mythical, .lake-mythical {
                        background-image: url('./assets/images/lake-mythical.png') !important;
                        background-size: contain !important;
                        background-repeat: no-repeat !important;
                        background-position: center !important;
                    }
                    `;
                    document.head.appendChild(styleSheet);
                    console.log("Dodano alternatywne style CSS dla ptaków z Brzegu Jeziora");
                    
                    // Sprawdź, czy obrazki są dostępne
                    console.log("Sprawdzam dostępność obrazków ptaków z Brzegu Jeziora...");
                    ['common', 'rare', 'epic', 'legendary', 'mythical'].forEach(type => {
                        const img = new Image();
                        img.onload = () => console.log(`✅ Obrazek ./assets/images/lake-${type}.png załadowany poprawnie`);
                        img.onerror = () => console.error(`❌ Błąd ładowania obrazka ./assets/images/lake-${type}.png`);
                        img.src = `./assets/images/lake-${type}.png`;
                    });
                } else {
                    console.warn("Brak konfiguracji obrazków dla Brzegu Jeziora, tworzę nową...");
                    lakeConfig.birdImages = {
                        common: "./assets/images/lake-common.png",
                        rare: "./assets/images/lake-rare.png",
                        epic: "./assets/images/lake-epic.png",
                        legendary: "./assets/images/lake-legendary.png",
                        mythical: "./assets/images/lake-mythical.png"
                    };
                }
                
                // Napraw referencje w elementach DOM
                console.log("Naprawiam referencje obrazków w elementach DOM...");
                document.querySelectorAll('.catalog-bird-item').forEach(item => {
                    const birdId = item.getAttribute('data-bird-id');
                    if (birdId && (birdId.includes('duck') || birdId.includes('heron') || 
                                  birdId.includes('swan') || birdId.includes('pelican') || 
                                  birdId.includes('kraken'))) {
                        
                        // To jest ptak z jeziora, napraw obrazek
                        const imageElement = item.querySelector('.catalog-bird-image');
                        if (imageElement) {
                            // Określ typ ptaka na podstawie ID
                            let type = "";
                            if (birdId.includes('common_duck')) type = "common";
                            else if (birdId.includes('rare_heron')) type = "rare";
                            else if (birdId.includes('epic_swan')) type = "epic";
                            else if (birdId.includes('legendary_pelican')) type = "legendary";
                            else if (birdId.includes('mythical_kraken')) type = "mythical";
                            
                            if (type) {
                                const imagePath = `./assets/images/lake-${type}.png`;
                                imageElement.style.backgroundImage = `url('${imagePath}')`;
                                console.log(`Naprawiono obrazek dla ptaka ${birdId} -> ${imagePath}`);
                            }
                        }
                    }
                });
                
                // Zapisz zaktualizowany stan gry
                if (typeof window.saveGame === 'function') {
                    window.saveGame();
                    console.log("Zapisano zaktualizowany stan gry z poprawionymi obrazkami");
                }
            } else {
                console.error("Nie znaleziono konfiguracji dla Brzegu Jeziora!");
            }
            
            // Dodatkowa naprawa dla aktywnych ptaków w slotach
            if (window.gameState && window.gameState.locationSlots && window.gameState.locationSlots['lake']) {
                console.log("Naprawiam obrazki ptaków w aktywnych slotach Brzegu Jeziora...");
                
                // Odśwież wszystkie sloty z ptakami, jeśli wybrana jest lokacja jeziora
                if (window.gameState.locations.currentLocation === 'lake') {
                    document.querySelectorAll('.bird-slot').forEach((slot, index) => {
                        const slotData = window.gameState.locationSlots['lake'][index];
                        if (slotData && slotData.isActive) {
                            const birdImage = slot.querySelector('.bird-image');
                            if (birdImage) {
                                // Napraw klasy CSS
                                birdImage.classList.remove('common-bird', 'rare-bird', 'epic-bird', 'legendary-bird', 'mythical-bird');
                                birdImage.classList.add(`lake-${slotData.birdType}`);
                                
                                // Ustaw bezpośrednio tło
                                birdImage.style.backgroundImage = `url('./assets/images/lake-${slotData.birdType}.png')`;
                                console.log(`Naprawiono obrazek ptaka w slocie ${index}, typ: ${slotData.birdType}`);
                            }
                        }
                    });
                }
            }
            
            console.log("Zakończono sprawdzanie i naprawę obrazków ptaków w lokacji Brzeg Jeziora");
        }, 2500); // Opóźnienie, aby upewnić się, że wszystko jest załadowane
    });
    </script>



<!-- Kod naprawiający stan odblokowania Tajemniczego Lasu w katalogu ptaków -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Sprawdzanie i naprawa stanu odblokowania Tajemniczego Lasu w katalogu...");
            
            // Funkcja sprawdzająca i naprawiająca stan odblokowania lokacji w katalogu
            function checkForestUnlocking() {
                console.log("Sprawdzanie odblokowania lokacji Tajemniczy Las");
                
                // Sprawdź, czy lokacja jest odblokowana w gameState
                const isForestUnlocked = window.gameState && 
                                       window.gameState.locations && 
                                       window.gameState.locations.unlockedLocations && 
                                       window.gameState.locations.unlockedLocations.forest === true;
                
                console.log("Lokacja Tajemniczy Las jest odblokowana:", isForestUnlocked);
                
                // Znajdź elementy lokacji Tajemniczy Las w katalogu
                const forestCatalog = document.getElementById('forest-catalog');
                if (!forestCatalog) {
                    console.error("Nie znaleziono elementu forest-catalog!");
                    return;
                }
                
                // Pobierz elementy do modyfikacji
                const lockInfo = forestCatalog.querySelector('.location-lock-info');
                const birdGrid = forestCatalog.querySelector('.bird-grid');
                const statusElement = forestCatalog.querySelector('.location-status');
                
                if (isForestUnlocked) {
                    // Jeśli lokacja jest odblokowana
                    console.log("Pokazuję ptaki z Tajemniczego Lasu w katalogu");
                    forestCatalog.classList.remove('location-locked');
                    
                    if (lockInfo) lockInfo.style.display = 'none';
                    if (birdGrid) birdGrid.style.display = 'grid';
                    if (statusElement) statusElement.textContent = 'Odblokowane';
                } else {
                    // Jeśli lokacja jest zablokowana
                    console.log("Ukrywam ptaki z Tajemniczego Lasu w katalogu");
                    forestCatalog.classList.add('location-locked');
                    
                    if (lockInfo) lockInfo.style.display = 'block';
                    if (birdGrid) birdGrid.style.display = 'none';
                    if (statusElement) statusElement.textContent = 'Zablokowane';
                }
            }
            
            // Rozszerzona funkcja sprawdzająca odblokowanie wszystkich lokacji
            function checkAllLocationsUnlocking() {
                console.log("Sprawdzanie odblokowania wszystkich lokacji w katalogu");
                
                // Sprawdź odblokowanie Brzegu Jeziora
                const lakeCatalog = document.getElementById('lake-catalog');
                if (lakeCatalog) {
                    const isLakeUnlocked = window.gameState?.locations?.unlockedLocations?.lake === true;
                    console.log("Brzeg Jeziora odblokowany:", isLakeUnlocked);
                    
                    if (isLakeUnlocked) {
                        lakeCatalog.classList.remove('location-locked');
                        const lockInfo = lakeCatalog.querySelector('.location-lock-info');
                        const birdGrid = lakeCatalog.querySelector('.bird-grid');
                        const statusElement = lakeCatalog.querySelector('.location-status');
                        
                        if (lockInfo) lockInfo.style.display = 'none';
                        if (birdGrid) birdGrid.style.display = 'grid';
                        if (statusElement) statusElement.textContent = 'Odblokowane';
                    }
                }
                
                // Sprawdź odblokowanie Tajemniczego Lasu
                const forestCatalog = document.getElementById('forest-catalog');
                if (forestCatalog) {
                    const isForestUnlocked = window.gameState?.locations?.unlockedLocations?.forest === true;
                    console.log("Tajemniczy Las odblokowany:", isForestUnlocked);
                    
                    if (isForestUnlocked) {
                        forestCatalog.classList.remove('location-locked');
                        const lockInfo = forestCatalog.querySelector('.location-lock-info');
                        const birdGrid = forestCatalog.querySelector('.bird-grid');
                        const statusElement = forestCatalog.querySelector('.location-status');
                        
                        if (lockInfo) lockInfo.style.display = 'none';
                        if (birdGrid) birdGrid.style.display = 'grid';
                        if (statusElement) statusElement.textContent = 'Odblokowane';
                    }
                }
            }
            
            // Wykonaj natychmiastową naprawę
            checkForestUnlocking();
            checkAllLocationsUnlocking();
            
            // Dodaj obserwator dla zmian w gameState.locations.unlockedLocations
            const originalSaveGame = window.saveGame;
            if (typeof originalSaveGame === 'function') {
                window.saveGame = function() {
                    // Wywołaj oryginalną funkcję
                    originalSaveGame.apply(this, arguments);
                    
                    // Sprawdź odblokowanie po zapisie
                    checkAllLocationsUnlocking();
                };
                console.log("Dodano hook do funkcji saveGame");
            }
            
            // Dodaj obserwator dla przycisku katalogu ptaków
            const catalogButton = document.getElementById('bird-catalog-button');
            if (catalogButton) {
                const originalOnClick = catalogButton.onclick;
                catalogButton.onclick = function() {
                    // Wywołaj oryginalną funkcję (jeśli istnieje)
                    if (typeof originalOnClick === 'function') {
                        originalOnClick.apply(this, arguments);
                    }
                    
                    // Sprawdź odblokowanie po kliknięciu
                    setTimeout(function() {
                        checkAllLocationsUnlocking();
                    }, 300);
                };
                console.log("Dodano obserwator dla przycisku katalogu ptaków");
            }
            
            // Dodaj obserwator dla klasy active na ekranie katalogu
            const catalogScreen = document.getElementById('bird-catalog-screen');
            if (catalogScreen) {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.attributeName === 'class') {
                            if (catalogScreen.classList.contains('active')) {
                                console.log("Wykryto otwarcie katalogu - sprawdzam odblokowanie lokacji");
                                checkAllLocationsUnlocking();
                            }
                        }
                    });
                });
                
                observer.observe(catalogScreen, { attributes: true });
                console.log("Dodano obserwator dla aktywacji ekranu katalogu");
            }
            
            // Wywołaj funkcję przy zdarzeniu gameLoaded
          
            
document.addEventListener('gameLoaded', function() {
    setTimeout(function() {
        checkAllLocationsUnlocking();
        // Aktualizuj tłumaczenia katalogu ptaków
        if (typeof updateBirdCatalogTranslations === 'function') {
            updateBirdCatalogTranslations();
        }
    }, 500);
});


            
            console.log("Zakończono sprawdzanie i naprawę stanu odblokowania Tajemniczego Lasu");
            
            // Wykonaj jeszcze jedną naprawę z większym opóźnieniem
            setTimeout(function() {
                checkAllLocationsUnlocking();
            }, 3000);
        }, 2000); // Dłuższe opóźnienie, aby upewnić się, że wszystko jest załadowane
    });
    </script>


<!-- Kod naprawiający odkrywanie ptaków w Tajemniczym Lesie -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Naprawa systemu odkrywania ptaków dla Tajemniczego Lasu...");
            
            // Sprawdź czy funkcja discoverBird jest dostępna
            if (typeof window.discoverBird !== 'function') {
                console.error("Funkcja discoverBird niedostępna - nie można kontynuować naprawy!");
                return;
            }
            
            // Funkcja do sprawdzania i naprawiania mapowania ptaków
            function fixBirdTypeMapping() {
                console.log("Sprawdzanie mapowania typów ptaków na identyfikatory...");
                
                // Sprawdź czy mamy poprawne mapowanie dla nowej lokacji
                if (window.gameState && window.BIRD_TYPE_TO_ID && !window.BIRD_TYPE_TO_ID.forest) {
                    console.log("Brak mapowania BIRD_TYPE_TO_ID dla Tajemniczego Lasu - dodaję...");
                    window.BIRD_TYPE_TO_ID.forest = {
                        common: "common_woodpecker",
                        rare: "rare_owl",
                        epic: "epic_hawk",
                        legendary: "legendary_griffin",
                        mythical: "mythical_phoenix"
                    };
                }
                
                // Napraw funkcję trySpawnBirdInSlot, aby odkrywała ptaki
                const originalSpawnFunction = window.trySpawnBirdInSlot;
                if (typeof originalSpawnFunction === 'function') {
                    window.trySpawnBirdInSlot = function(slotIndex, locationId) {
                        console.log(`Przechwycono generowanie ptaka w slocie ${slotIndex} w lokacji ${locationId || 'nieznana'}`);
                        
                        // Wywołaj oryginalną funkcję
                        const birdType = originalSpawnFunction.apply(this, arguments);
                        
                        // Jeśli ptak został wygenerowany, odkryj go w katalogu
                        if (birdType && locationId) {
                            console.log(`Wygenerowano ptaka typu ${birdType} w lokacji ${locationId}`);
                            
                            // Znajdź ID ptaka na podstawie typu i lokacji
                            let birdId = null;
                            
                            // Użyj mapowania, jeśli dostępne
                            if (window.BIRD_TYPE_TO_ID && window.BIRD_TYPE_TO_ID[locationId]) {
                                birdId = window.BIRD_TYPE_TO_ID[locationId][birdType];
                            }
                            
                            // Alternatywne mapowanie (manualne) jako zabezpieczenie
                            if (!birdId) {
                                if (locationId === 'forest') {
                                    if (birdType === 'common') birdId = 'common_woodpecker';
                                    else if (birdType === 'rare') birdId = 'rare_owl';
                                    else if (birdType === 'epic') birdId = 'epic_hawk';
                                    else if (birdType === 'legendary') birdId = 'legendary_griffin';
                                    else if (birdType === 'mythical') birdId = 'mythical_phoenix';
                                }
                            }
                            
                            if (birdId) {
                                console.log(`Odkrywam ptaka ${birdId} w lokacji ${locationId}`);
                                window.discoverBird(birdId, locationId);
                                
                                // Aktualizuj UI katalogu, jeśli jest otwarty
                                if (document.querySelector('.game-screen.active#bird-catalog-screen')) {
                                    if (typeof window.updateBirdAppearanceDirectly === 'function') {
                                        console.log("Aktualizuję wygląd ptaków w katalogu po odkryciu");
                                        setTimeout(window.updateBirdAppearanceDirectly, 100);
                                    }
                                }
                            }
                        }
                        
                        return birdType;
                    };
                    console.log("Naprawiono funkcję generowania ptaków");
                }
            }
            
            // Funkcja do ręcznego odkrywania ptaków (do testów)
            window.manualDiscoverBirdInForest = function(birdType) {
                console.log(`Ręczne odkrywanie ptaka typu ${birdType} w Tajemniczym Lesie`);
                
                let birdId;
                if (birdType === 'common') birdId = 'common_woodpecker';
                else if (birdType === 'rare') birdId = 'rare_owl';
                else if (birdType === 'epic') birdId = 'epic_hawk';
                else if (birdType === 'legendary') birdId = 'legendary_griffin';
                else if (birdType === 'mythical') birdId = 'mythical_phoenix';
                else {
                    console.error(`Nieznany typ ptaka: ${birdType}`);
                    return;
                }
                
                window.discoverBird(birdId, 'forest');
                console.log(`Odkryto ptaka ${birdId} w Tajemniczym Lesie`);
                
                // Aktualizuj UI katalogu
                if (typeof window.updateBirdAppearanceDirectly === 'function') {
                    setTimeout(window.updateBirdAppearanceDirectly, 100);
                }
                
                // Pokaż katalog
                if (typeof window.showBirdCatalog === 'function') {
                    setTimeout(window.showBirdCatalog, 200);
                }
            };
            
            // Funkcja do sprawdzania i naprawiania systemu odkrywania ptaków
            function fixBirdDiscoverySystem() {
                console.log("Sprawdzanie i naprawa systemu odkrywania ptaków...");
                
                // Upewnij się, że mamy strukturę dla odkrytych ptaków
                if (!gameState.discoveredBirds) {
                    gameState.discoveredBirds = {};
                }
                
                if (!gameState.discoveredBirds.forest) {
                    gameState.discoveredBirds.forest = {
                        common_woodpecker: false,
                        rare_owl: false,
                        epic_hawk: false,
                        legendary_griffin: false,
                        mythical_phoenix: false
                    };
                }
                
                // Napraw powiązanie między generowaniem ptaków a ich odkrywaniem
                fixBirdTypeMapping();
                
                console.log("Zakończono naprawę systemu odkrywania ptaków");
            }
            
            // Wywołaj naprawę
            fixBirdDiscoverySystem();
            
            // Dodaj obserwator dla aktualizacji katalogu po odkryciu ptaka
            const originalDiscoverBird = window.discoverBird;
            if (typeof originalDiscoverBird === 'function') {
                window.discoverBird = function(birdId, locationId) {
                    console.log(`Przechwycono odkrywanie ptaka: ${birdId} w lokacji ${locationId}`);
                    
                    // Wywołaj oryginalną funkcję
                    const result = originalDiscoverBird.apply(this, arguments);
                    
                    // Aktualizuj UI katalogu po odkryciu
                    setTimeout(function() {
                        if (typeof window.updateBirdAppearanceDirectly === 'function') {
                            window.updateBirdAppearanceDirectly();
                            console.log("Zaktualizowano UI katalogu po odkryciu ptaka");
                        }
                    }, 200);
                    
                    return result;
                };
                console.log("Naprawiono funkcję odkrywania ptaków");
            }
            
            console.log("Zakończono naprawę systemu odkrywania ptaków dla Tajemniczego Lasu");
        }, 2000);
    });
    </script>




<!-- Awaryjne rozwiązanie dla katalogu Brzeg Jeziora -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Funkcja naprawiająca katalog Brzegu Jeziora
        function naprawKatalogJeziora() {
            console.log("Uruchamiam naprawę katalogu Brzeg Jeziora");
            
            // Znajdź katalog Jeziera
            const lakeCatalog = document.getElementById('lake-catalog');
            if (!lakeCatalog) return;
            
            // Sprawdź czy lokacja jest odblokowana
            const isUnlocked = window.gameState && 
                              window.gameState.locations && 
                              window.gameState.locations.unlockedLocations && 
                              window.gameState.locations.unlockedLocations.lake === true;
            
            if (isUnlocked) {
                // Usuń klasę location-locked
                lakeCatalog.classList.remove('location-locked');
                
                // Znajdź siatkę ptaków
                const birdGrid = lakeCatalog.querySelector('.bird-grid');
                if (birdGrid) {
                    // Usuń style display:none - KLUCZOWE
                    birdGrid.style.display = 'grid';
                    console.log("Naprawiono wyświetlanie ptaków w Brzegu Jeziora");
                }
                
                // Ukryj informację o odblokowaniu
                const lockInfo = lakeCatalog.querySelector('.location-lock-info');
                if (lockInfo) lockInfo.style.display = 'none';
                
                // Zaktualizuj status
                const statusEl = lakeCatalog.querySelector('.location-status');
                if (statusEl) statusEl.textContent = 'Odblokowane';
            }
        }
        
        // Uruchom naprawę po chwili
        setTimeout(naprawKatalogJeziora, 1000);
        
        // Uruchom naprawę po kliknięciu przycisku katalogu
        document.getElementById('bird-catalog-button')?.addEventListener('click', function() {
            setTimeout(naprawKatalogJeziora, 300);
        });
        
        // Dodaj funkcję do globalnego zakresu
        window.naprawKatalogJeziora = naprawKatalogJeziora;
    });
    </script>

<!-- Skrypt naprawczy dla katalogu ptaków Brzeg Jeziora -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Funkcja do naprawy katalogu Brzeg Jeziora
        function repairLakeCatalog() {
            console.log("Uruchamiam dodatkową naprawę katalogu Brzeg Jeziora");
            
            // Znajdź elementy
            const lakeCatalog = document.getElementById('lake-catalog');
            if (!lakeCatalog) return;
            
            // Sprawdź, czy lokacja jest odblokowana
            const isLakeUnlocked = window.gameState && 
                                 window.gameState.locations && 
                                 window.gameState.locations.unlockedLocations && 
                                 window.gameState.locations.unlockedLocations.lake === true;
            
            if (isLakeUnlocked) {
                // Usuń klasę locked
                lakeCatalog.classList.remove('location-locked');
                
                // Znajdź siatkę ptaków
                let birdGrid = lakeCatalog.querySelector('.bird-grid');
                
                // Jeśli siatka istnieje, napraw jej wyświetlanie
                if (birdGrid) {
                    // Wyczyść stare style
                    birdGrid.removeAttribute('style');
                    // Ustaw display: grid !important
                    birdGrid.setAttribute('style', 'display: grid !important');
                }
                
                // Ukryj komunikat o odblokowaniu
                const lockInfo = lakeCatalog.querySelector('.location-lock-info');
                if (lockInfo) {
                    lockInfo.style.display = 'none';
                }
                
                // Zaktualizuj status
                const statusElement = lakeCatalog.querySelector('.location-status');
                if (statusElement) {
                    statusElement.textContent = 'Odblokowane';
                }
            }
        }
        
        // Uruchom naprawę przy ładowaniu strony
        setTimeout(repairLakeCatalog, 2000);
        
        // Uruchom naprawę po kliknięciu przycisku katalogu
        const catalogButton = document.getElementById('bird-catalog-button');
        if (catalogButton) {
            catalogButton.addEventListener('click', function() {
                setTimeout(repairLakeCatalog, 500);
            });
        }
        
        // Dodatkowa naprawa przy zdarzeniu gameLoaded
        document.addEventListener('gameLoaded', function() {
            setTimeout(repairLakeCatalog, 1000);
        });
    });
</script>



<!-- Dodatkowy skrypt naprawiający odbieranie nagród TON -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Uruchamiam naprawę odbioru nagród TON...");
            
            // Funkcja do naprawy przycisków odbioru nagród
            function fixCollectRewardButtons() {
                // Znajdź wszystkie przyciski odbioru nagród
                document.querySelectorAll('.collect-reward-button').forEach(button => {
                    // Usuń stare event listenery
                    const newButton = button.cloneNode(true);
                    if (button.parentNode) {
                        button.parentNode.replaceChild(newButton, button);
                    }
                    
                    // Dodaj nowy, usprawniony event listener
                    newButton.addEventListener('click', function() {
                        // Znajdź indeks slotu
                        const slot = this.closest('.bird-slot');
                        if (!slot) return;
                        
                        const slotIndex = slot.getAttribute('data-slot');
                        if (slotIndex === null) return;
                        
                        // Wywołaj funkcję odbioru nagrody
                        console.log("Odbieram nagrodę w slocie", slotIndex);
                        
                        if (typeof collectBirdReward === 'function') {
                            const reward = collectBirdReward(slotIndex);
                            if (reward > 0) {
                                showNotification(`Otrzymałeś ${reward} DziubCoinów!`);
                             showRewardAnimation(`+${reward} DziubCoinów`, button);
                            }
                        }
                    });
                });
                
                console.log("Zakończono naprawę przycisków odbioru nagród TON");
            }
            
            // Uruchamiaj naprawę przy każdej zmianie ekranu
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function() {
                    setTimeout(fixCollectRewardButtons, 300);
                });
            });
            
            // Uruchom naprawę po załadowaniu
            fixCollectRewardButtons();
            
            // Uruchamiaj co 3 sekundy (zabezpieczenie)
            setInterval(fixCollectRewardButtons, 3000);
        }, 2000);
    });
</script>





<!-- Usuń wszystkie istniejące skrypty związane z inicjalizacją misji -->
<!-- Wklej ten kod tuż przed zamykającym </body> -->

<script>
    // Kontrola inicjalizacji
    let gameInitialized = false;
    
    document.addEventListener('DOMContentLoaded', () => {
      console.log('DOM załadowany');
      
      // Inicjalizacja gry z debounce
      if (!gameInitialized) {
        gameInitialized = true;
        initializeGame();
      }
    });
    
    function initializeGame() {
      // Wczytaj grę
      if (typeof loadGame === 'function') {
        loadGame();
      }
      
      // Odczekaj na załadowanie danych
      setTimeout(() => {
        console.log('Inicjalizacja UI po załadowaniu gry');
        
        // Inicjalizuj sloty i inne elementy
        if (typeof setupBirdSlots === 'function') {
          setupBirdSlots();
        }
        
        if (typeof setupUpgradeButtons === 'function') {
          setupUpgradeButtons();
        }
        
        if (typeof setupMissionsAndAchievementsTabs === 'function') {
          setupMissionsAndAchievementsTabs();
        }
        
        if (typeof setupWalletScreen === 'function') {
          setupWalletScreen();
        }
        
        if (typeof setupCollectionButtons === 'function') {
          setupCollectionButtons();
        }
        
       
        
        
        // Na końcu inicjalizuj misje
        setTimeout(() => {
          if (typeof setupMissions === 'function') {
            setupMissions();
          }
        }, 500);
        
      }, 100);
    }
    
    // Nasłuchuj wydarzenia załadowania gry
    document.addEventListener('gameLoaded', () => {
      console.log('Gra załadowana - odświeżam misje');
      // Tylko odświeżmy UI, nie inicjalizujmy ponownie
      if (window.missionsInitialized) {
        setTimeout(() => {
          if (typeof setupMissions === 'function') {
            setupMissions();
          }
        }, 200);
      }
    });
    
    
    
    </script>



<!-- Kod obsługujący pasek nawigacji na ekranie aktywnej ekspedycji -->
<script>
    // Wykonaj po załadowaniu strony
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Inicjalizacja przycisków nawigacji dla ekranu aktywnej ekspedycji");
            
            // Znajdź wszystkie przyciski nawigacji
            document.querySelectorAll('.nav-button').forEach(button => {
                // Dodaj obsługę kliknięcia, która uwzględnia ekran aktywnej ekspedycji
                button.addEventListener('click', function() {
                    const targetScreen = this.getAttribute('data-screen');
                    console.log("Kliknięto przycisk nawigacji:", targetScreen);
                    
                    // Jeśli jesteśmy na ekranie aktywnej ekspedycji i nie anulowano ekspedycji
                    const activeExpScreen = document.getElementById('active-expedition-screen');
                    if (activeExpScreen && activeExpScreen.classList.contains('active')) {
                        // Pokaż komunikat o aktywnej ekspedycji
                        if (typeof showNotification === 'function') {
                            showNotification("Ekspedycja w trakcie! Możesz wrócić do niej z ekranu Gniazda.");
                        }
                        
                        // Ukryj ekran aktywnej ekspedycji
                        activeExpScreen.classList.remove('active');
                        activeExpScreen.classList.remove('show');
                        activeExpScreen.style.display = 'none';
                        
                        // Przywróć scrollowanie dokumentu
                        document.body.style.overflow = '';
                    }
                    
                    // Standardowa obsługa przełączania ekranów
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.classList.remove('active');
                    });
                    
                    const targetElement = document.getElementById(targetScreen);
                    if (targetElement) {
                        targetElement.classList.add('active');
                    }
                });
            });
        }, 1500);
    });
</script>






<!-- Naprawiający skrypt dla przycisków nawigacji na ekranie aktywnej ekspedycji -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Funkcja do bezpośredniej obsługi kliknięć przycisków nawigacji
        function fixNavigationButtonsOnActiveExpedition() {
            console.log("Naprawiam przyciski nawigacji dla ekranu aktywnej ekspedycji");
            
            // Znajdź wszystkie przyciski nawigacji
            document.querySelectorAll('#navigation-bar .nav-button').forEach(button => {
                // Usuń wszystkie istniejące obsługi zdarzeń (ważne!)
                const newButton = button.cloneNode(true);
                button.parentNode.replaceChild(newButton, button);
                
                // Dodaj nową obsługę kliknięcia
                newButton.addEventListener('click', function(event) {
                    // Zatrzymaj domyślne działanie i propagację
                    event.preventDefault();
                    event.stopPropagation();
                    
                    // Pobierz docelowy ekran
                    const targetScreenId = this.getAttribute('data-screen');
                    console.log("Kliknięto przycisk nawigacji do:", targetScreenId);
                    
                    // Znajdź aktywny ekran ekspedycji
                    const activeExpScreen = document.getElementById('active-expedition-screen');
                    
                    // Ukryj ekran aktywnej ekspedycji, jeśli jest widoczny
                    if (activeExpScreen) {
                        activeExpScreen.classList.remove('active');
                        activeExpScreen.classList.remove('show');
                        if (activeExpScreen.style) {
                            activeExpScreen.style.display = 'none';
                        }
                    }
                    
                    // Ukryj wszystkie ekrany
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.classList.remove('active');
                    });
                    
                    // Pokaż docelowy ekran
                    const targetScreen = document.getElementById(targetScreenId);
                    if (targetScreen) {
                        targetScreen.classList.add('active');
                        console.log("Aktywowano ekran:", targetScreenId);
                    }
                    
                
                    // Jeśli jest to przejście z ekranu aktywnej ekspedycji, pokaż powiadomienie
if (activeExpScreen && activeExpScreen.classList.contains('show')) {
    if (typeof showNotification === 'function') {
        showNotification(t('notifications.expeditionInProgress'));
    }
    
    // Przywróć scrollowanie dokumentu
    document.body.style.overflow = '';
}

                    
                    // Dodaj klasę active do klikniętego przycisku
                    document.querySelectorAll('.nav-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            console.log("Naprawa przycisków nawigacji zakończona");
        }
        
        // Uruchom naprawę po załadowaniu strony i co 2 sekundy jako zabezpieczenie
        setTimeout(fixNavigationButtonsOnActiveExpedition, 1000);
        setInterval(fixNavigationButtonsOnActiveExpedition, 2000);
        
        // Uruchom naprawę również gdy ekspedycja staje się aktywna
        const activeExpScreen = document.getElementById('active-expedition-screen');
        if (activeExpScreen) {
            // Użyj MutationObserver do wykrywania zmian w aktywności ekranu
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.attributeName === 'class' && 
                        (activeExpScreen.classList.contains('active') || 
                         activeExpScreen.classList.contains('show'))) {
                        console.log("Wykryto aktywację ekranu ekspedycji - naprawiam przyciski");
                        fixNavigationButtonsOnActiveExpedition();
                    }
                });
            });
            
            observer.observe(activeExpScreen, { attributes: true });
        }
    });
</script>





<script>


    // Obsługa przycisku sklepu na ekranie głównym
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            const shopMainButton = document.querySelector('.shop-main-button');
            if (shopMainButton) {
                shopMainButton.addEventListener('click', function() {
                    // Ukryj wszystkie ekrany
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.classList.remove('active');
                    });
                    
                    // Pokaż ekran sklepu
                    const shopScreen = document.getElementById('shop-screen');
                    if (shopScreen) {
                        shopScreen.classList.add('active');
                    }
                });
            }
        }, 1000);
    });
</script>









<!-- Skrypt do obsługi okna ustawień -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Znajdź przycisk ustawień i okno modalne
        const settingsButton = document.querySelector('.settings-button');
        const settingsModal = document.getElementById('settings-modal');
        const closeButton = settingsModal.querySelector('.close-button');

        // Funkcja otwierająca okno ustawień
        function openSettingsModal() {
            settingsModal.style.display = 'flex';
            
            // Inicjalizuj kontrolki dźwięku przy otwarciu okna
            if (window.SoundModule && typeof window.SoundModule.initSoundSettings === 'function') {
                window.SoundModule.initSoundSettings();
            }
            
            // Inicjalizuj kontrolki języka przy otwarciu okna - DODANA LINIA
            if (window.SoundModule && typeof window.SoundModule.initLanguageOptions === 'function') {
                window.SoundModule.initLanguageOptions();
            }
        }

        // Funkcja zamykająca okno ustawień
        function closeSettingsModal() {
            settingsModal.style.display = 'none';
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku ustawień
        if (settingsButton) {
            settingsButton.addEventListener('click', openSettingsModal);
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku zamknięcia
        if (closeButton) {
            closeButton.addEventListener('click', closeSettingsModal);
        }

        // Zamknij okno po kliknięciu poza jego obszarem
        settingsModal.addEventListener('click', function(event) {
            if (event.target === settingsModal) {
                closeSettingsModal();
            }
        });
    });
</script>













<!-- Skrypt do obsługi okna przyjaciół -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Znajdź przycisk przyjaciół i okno modalne
        const friendsButton = document.querySelector('.friends-button');
        const friendsModal = document.getElementById('friends-modal');
        const closeButton = friendsModal.querySelector('.close-button');

        // Funkcja otwierająca okno przyjaciół
        function openFriendsModal() {
            friendsModal.style.display = 'flex';
        }

        // Funkcja zamykająca okno przyjaciół
        function closeFriendsModal() {
            friendsModal.style.display = 'none';
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku przyjaciół
        if (friendsButton) {
            friendsButton.addEventListener('click', openFriendsModal);
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku zamknięcia
        if (closeButton) {
            closeButton.addEventListener('click', closeFriendsModal);
        }

        // Zamknij okno po kliknięciu poza jego obszarem
        friendsModal.addEventListener('click', function(event) {
            if (event.target === friendsModal) {
                closeFriendsModal();
            }
        });
    });
</script>





<!-- Skrypt do obsługi okna nagród dziennych -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Znajdź przycisk kalendarza i okno modalne
        const kalendarzButton = document.querySelector('.kalendarz-button');
        const kalendarzModal = document.getElementById('kalendarz-modal');
        const closeButton = kalendarzModal.querySelector('.close-button');

        // Funkcja otwierająca okno nagród dziennych
        function openKalendarzModal() {
            kalendarzModal.style.display = 'flex';
        }

        // Funkcja zamykająca okno nagród dziennych
        function closeKalendarzModal() {
            kalendarzModal.style.display = 'none';
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku kalendarza
        if (kalendarzButton) {
            kalendarzButton.addEventListener('click', openKalendarzModal);
        }

        // Dodaj nasłuchiwanie na kliknięcie przycisku zamknięcia
        if (closeButton) {
            closeButton.addEventListener('click', closeKalendarzModal);
        }

        // Zamknij okno po kliknięciu poza jego obszarem
        kalendarzModal.addEventListener('click', function(event) {
            if (event.target === kalendarzModal) {
                closeKalendarzModal();
            }
        });
    });
</script>








<!-- Dodatkowy skrypt do automatycznego uruchamiania muzyki w tle -->
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            console.log("Próba uruchomienia muzyki w tle...");
            // Sprawdź czy moduł dźwięków jest dostępny
            if (window.SoundModule && typeof window.SoundModule.tryPlayBackgroundMusic === 'function') {
                window.SoundModule.tryPlayBackgroundMusic();
            }
        }, 2000);
    });
    
    // Dodatkowe rozwiązanie na pierwsze kliknięcie
    document.addEventListener('click', function musicStarter() {
        console.log("Pierwsze kliknięcie, próba odtworzenia muzyki...");
        // Sprawdź czy moduł dźwięków jest dostępny
        if (window.SoundModule) {
            // Sprawdź czy ekran główny jest aktywny
            const mainScreen = document.getElementById('main-screen');
            if (mainScreen && mainScreen.classList.contains('active') && window.SoundModule.soundEnabled) {
                window.SoundModule.playSound('background');
            }
        }
        // Usuń listener po pierwszym kliknięciu
        document.removeEventListener('click', musicStarter);
    }, { once: true });
</script>










<!-- Kod naprawiający powiadomienia przy konwersji walut -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Funkcja wyświetlająca powiadomienie z właściwą grafiką




    
window.showConversionNotification = function(text, type) {
    console.log(`Pokazuję powiadomienie konwersji: ${text}, typ: ${type}`);
    
    try {
        // Zawsze twórz nowy element powiadomienia zamiast szukać istniejącego
        const notification = document.createElement('div');
        notification.className = 'notification';
        document.body.appendChild(notification);
        
        // Ustal tekst powiadomienia
        let message = '';
        if (type === 'fruit') {
            message = `You received ${text.split(' ')[0]} fruits for ${text.split(' ')[4]} BirdCoins`;
        } else {
            message = `You received ${text.split(' ')[0]} BirdCoins for ${text.split(' ')[4]} fruits`;
        }
        
        // Utwórz zawartość z odpowiednią grafiką
        const iconSrc = type === 'fruit' ? 'assets/images/fruit-icon.png' : 'assets/images/coin-icon.png';
        notification.innerHTML = `${message} <img src="${iconSrc}" style="width: 20px; height: 20px; vertical-align: middle; margin-left: 5px;">`;
        notification.classList.add('show');
        
        // Ukryj powiadomienie po 3 sekundach
        setTimeout(() => {
            notification.classList.remove('show');
            // Usuń element po ukryciu
            setTimeout(() => {
                if (notification && notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 3000);
    } catch (error) {
        console.error("Błąd podczas wyświetlania powiadomienia:", error);
        // Zapasowa metoda - użyj alertu jeśli wszystko inne zawiedzie
        alert(text);
    }
};





    
    // Napraw obsługę konwersji DC -> owoce
    const convertCoinsButton = document.getElementById('convert-coins-button');
    if (convertCoinsButton) {
        // Usuń stary event listener
        const newButton = convertCoinsButton.cloneNode(true);
        convertCoinsButton.parentNode.replaceChild(newButton, convertCoinsButton);
        
        // Dodaj nowy event listener
       
        
        newButton.addEventListener('click', function() {
    const fruitsInput = document.getElementById('fruits-input');
    const amount = parseInt(fruitsInput.value) || 0;
    
    if (amount < 1) {
        showNotification(t('notifications.enterFruitsAmount'));
        return;
    }
    
    if (gameState.resources.fruits < amount) {
        showNotification(t('notifications.notEnoughFruits'));
        return;
    }
    
    const coinsToAdd = amount * 90;
    gameState.resources.fruits -= amount;
    gameState.resources.coins += coinsToAdd;
    
    // Pokaż powiadomienie używając bezpośrednio funkcji t() z prawidłowymi parametrami
    showNotification(t('notifications.convertedFruitsToCoins', {
        amount: amount,
        coins: coinsToAdd
    }));
    
    // Dodaj animację nagrody
    if (typeof showRewardAnimation === 'function') {
        const buttonElement = document.getElementById('convert-fruits-button');
        showRewardAnimation(`+${coinsToAdd} 💰`, buttonElement);
    }
    
    fruitsInput.value = '';
    updateUI();
    saveGame();
});


    }
    
    // Napraw obsługę konwersji owoce -> DC  
    const convertFruitsButton = document.getElementById('convert-fruits-button');
    if (convertFruitsButton) {
        // Usuń stary event listener
        const newButton = convertFruitsButton.cloneNode(true);
        convertFruitsButton.parentNode.replaceChild(newButton, convertFruitsButton);
        


    
        
newButton.addEventListener('click', function() {
    const coinsInput = document.getElementById('coins-input');
    const amount = parseInt(coinsInput.value) || 0;
    
    if (amount < 100) {
        showNotification(t('notifications.minCoinsAmount'));
        return;
    }
    
    if (gameState.resources.coins < amount) {
        showNotification(t('notifications.notEnoughCoins'));
        return;
    }
    
    const fruitsToAdd = Math.floor(amount / 100);
    gameState.resources.coins -= amount;
    gameState.resources.fruits += fruitsToAdd;
    
    // Pokaż powiadomienie używając bezpośrednio funkcji t() z prawidłowymi parametrami
    showNotification(t('notifications.receivedFruitsForCoins', {
        fruits: fruitsToAdd,
        coins: amount
    }));
    
    // Dodaj animację nagrody
    if (typeof showRewardAnimation === 'function') {
        const buttonElement = document.getElementById('convert-coins-button');
        showRewardAnimation(`+${fruitsToAdd} 🍇`, buttonElement);
    }
    
    coinsInput.value = '';
    updateUI();
    saveGame();
});

    }
    
    // Napraw również dynamiczne aktualizacje podglądu
    document.getElementById('coins-input')?.addEventListener('input', function() {
        const amount = parseInt(this.value) || 0;
        const fruitsResult = Math.floor(amount / 100);
        document.getElementById('fruits-from-coins').textContent = fruitsResult;
    });
    
    document.getElementById('fruits-input')?.addEventListener('input', function() {
        const amount = parseInt(this.value) || 0;
        const coinsResult = amount * 90;
        document.getElementById('coins-from-fruits').textContent = coinsResult;
    });
});
</script>



<!-- Skrypt naprawiający przycisk sklepu -->
<script>
window.addEventListener('load', function() {
    console.log("Dodatkowa inicjalizacja przycisku sklepu...");
    
    // Funkcja naprawiająca przycisk sklepu
    function ensureShopButtonWorks() {
        const shopButton = document.getElementById('shop-button');
        
        if (shopButton) {
            // Klon przycisku, aby usunąć wszystkie poprzednie event listenery
            const newButton = shopButton.cloneNode(true);
            shopButton.parentNode.replaceChild(newButton, shopButton);
            
            // Dodaj nowy event listener
            newButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log("Przycisk sklepu kliknięty!");
                
                // Bezpośrednie przełączenie ekranów
                document.querySelectorAll('.game-screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                
                const shopScreen = document.getElementById('shop-screen');
                if (shopScreen) {
                    shopScreen.classList.add('active');
                    console.log("Ekran sklepu aktywowany!");
                    
                    // Aktualizuj UI sklepu jeśli funkcja istnieje
                    if (typeof updateShopUI === 'function') {
                        updateShopUI();
                    }
                } else {
                    console.error("Nie znaleziono ekranu sklepu!");
                }
            });
            
            console.log("Przycisk sklepu naprawiony i gotowy!");
        } else {
            console.error("Nie znaleziono przycisku sklepu!");
        }
    }
    
    // Uruchom naprawę natychmiast i ponownie po krótkiej chwili
    ensureShopButtonWorks();
    setTimeout(ensureShopButtonWorks, 1000);
    
    // Dodaj funkcję globalnie, żeby można było ją wywołać z konsoli
    window.ensureShopButtonWorks = ensureShopButtonWorks;
});
</script>





<script>
document.addEventListener('DOMContentLoaded', function() {
    // Napraw przycisk powrotu z szafy
    const wardrobeBackButton = document.getElementById('wardrobe-back-button');
    if (wardrobeBackButton) {
        wardrobeBackButton.addEventListener('click', function() {
            console.log("Przycisk powrotu z szafy kliknięty");
            
            // Ukryj ekran szafy
            const wardrobeScreen = document.getElementById('wardrobe-screen');
            if (wardrobeScreen) {
                wardrobeScreen.classList.remove('active');
            }
            
            // Pokaż ekran hodowli
            const breedingScreen = document.getElementById('breeding-screen');
            if (breedingScreen) {
                breedingScreen.classList.add('active');
            }
        });
    }
});
</script>





<script>
// Skrypt naprawczy dla przycisków "Nakarm wszystkie" i "Odbierz wszystkie"
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        console.log("Uruchamiam naprawę tłumaczeń przycisków akcji...");
        
        // Napraw przyciski "Nakarm wszystkie"
        document.querySelectorAll('[data-action="feed"]').forEach(button => {
            button.textContent = t('locationActions.buttons.feedAll');
        });
        
        // Napraw przyciski "Odbierz wszystkie"
        document.querySelectorAll('[data-action="collect"]').forEach(button => {
            button.textContent = t('locationActions.buttons.collectAll');
        });
        
        console.log("Zakończono naprawę tłumaczeń przycisków akcji");
    }, 1000);
    




// Nasłuchuj na zmianę języka
document.addEventListener('languageChanged', function() {
    console.log("Wykryto zmianę języka - aktualizuję katalog ptaków");
    if (document.querySelector('#bird-catalog-screen.active')) {
        if (typeof updateCatalogTexts === 'function') {
            setTimeout(updateCatalogTexts, 100);
        }
    }
});







    // Także nasłuchuj na zdarzenie gameLoaded
    document.addEventListener('gameLoaded', function() {
        setTimeout(function() {
            document.querySelectorAll('[data-action="feed"]').forEach(button => {
                button.textContent = t('locationActions.buttons.feedAll');
            });
            
            document.querySelectorAll('[data-action="collect"]').forEach(button => {
                button.textContent = t('locationActions.buttons.collectAll');
            });
        }, 500);
    });
});
</script>


<script>
// Trwała naprawa badge'a misji - uruchamia się po pełnym załadowaniu strony
window.addEventListener('load', function() {
    // Daj stronie czas na inicjalizację wszystkich elementów
    setTimeout(function() {
     
        (function() {
          
            (function() {
    // Zapobiegaj wielokrotnemu uruchomieniu
    if (window.missionBadgeFixActive) {
        console.log("Naprawa badge'a misji już działa!");
        return;
    }
    
    window.missionBadgeFixActive = true;
    console.log("Uruchamiam trwałą naprawę badge'a misji");
    
    // 1. Stałe przywracanie czerwonej kropki
    let attempts = 0;
    
    function persistentBadgeCheck() {
        attempts++;
        
        // 1A. Sprawdź czy są misje do odebrania
        const hasMissions = checkForClaimableMissions();
        
        // 1B. Znajdź przycisk i dodaj kropkę, jeśli potrzeba
        if (hasMissions) {
            addBadgeToDOMButton();
        } else {
            // Usuń kropkę, jeśli nie ma misji do odebrania
            removeBadge();
        }
        
        // 1C. Log diagnostyczny co 10 prób
        if (attempts % 10 === 0) {
            console.log(`Kontrola badge'a misji (próba ${attempts}) - Misje do odebrania: ${hasMissions}`);
        }
    }
    
    // 2. Funkcja sprawdzająca, czy są misje do odebrania
    function checkForClaimableMissions() {
        if (!window.gameState) return false;
        
        const hasDailyClaimable = window.gameState.missions && 
            window.gameState.missions.some(m => m.completed === true && m.rewarded !== true);
        
        const hasWeeklyClaimable = window.gameState.weeklyMissions && 
            window.gameState.weeklyMissions.some(m => m.completed === true && m.rewarded !== true);
        
        return hasDailyClaimable || hasWeeklyClaimable;
    }
    
    // 3. Znajdź przycisk misji
    function findMissionButton() {
        // 3A. Metoda 1: Szukaj pomarańczowego przycisku "Misje"
        const buttons = document.querySelectorAll('a, button, .nav-button, div');
        for (let btn of buttons) {
            if (!btn.textContent) continue;
            
            const text = btn.textContent.trim();
            const style = window.getComputedStyle(btn);
            
            // Znajdź pomarańczowy przycisk nawigacyjny z tekstem "Misje"
            if (text === "Misje" || text === "Missions") {
                return btn;
            }
            
            // Znajdź element zawierający "Misje" o pomarańczowym kolorze
            if ((text.includes("Misje") || text.includes("Mission")) && 
                style.backgroundColor.includes("255") && 
                style.backgroundColor.includes("165")) {
                return btn;
            }
        }
        
        // 3B. Metoda 2: Znajdź po atrybucie data-screen
        const missionButton = document.querySelector('[data-screen="missions-screen"]');
        if (missionButton) return missionButton;
        
        // 3C. Metoda 3: Znajdź element "Misje" w dolnym menu
        const bottomMenu = document.querySelector('.bottom-menu') || 
                          document.querySelector('nav') || 
                          document.querySelector('footer');
        
        if (bottomMenu) {
            const menuButtons = bottomMenu.querySelectorAll('a, button, div');
            for (let btn of menuButtons) {
                if (btn.textContent && 
                    (btn.textContent.includes("Misje") || 
                     btn.textContent.includes("Mission"))) {
                    return btn;
                }
            }
        }
        
        // 3D. Na zrzucie ekranu widzę, że "Misje" to pomarańczowy element w dolnym menu
        const navButtons = document.querySelectorAll('.nav-button');
        for (let i = 0; i < navButtons.length; i++) {
            // W wielu grach "Misje" to 5. element w nawigacji
            if (i === 4 && navButtons[i]) return navButtons[i];
        }
        
        // 3E. Jeśli wszystko zawiedzie, znajdźmy pomarańczowy element
        for (let btn of buttons) {
            const style = window.getComputedStyle(btn);
            if (style.backgroundColor.includes("255, 165, 0") || 
                style.backgroundColor.includes("rgb(255, 165") || 
                style.backgroundColor.includes("orange")) {
                return btn;
            }
        }
        
        return null;
    }
    
    // 4. Dodaj czerwoną kropkę do przycisku
    function addBadgeToDOMButton() {
        // 4A. Znajdź przycisk misji
        const missionButton = findMissionButton();
        if (!missionButton) {
            console.log("Nie znaleziono przycisku misji!");
            return;
        }
        
        // 4B. Sprawdź, czy kropka już istnieje
        const existingBadge = document.querySelector('.mission-badge-permanent');
        if (existingBadge) return;
        
        // 4C. Utwórz element kropki
        const badge = document.createElement('div');
        badge.className = 'mission-badge-permanent';
        badge.style.cssText = `
            position: absolute;
            top: 3px;
            right: 3px;
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            z-index: 9999;
        `;
        
        // 4D. Ustaw position: relative na przycisku
        const position = window.getComputedStyle(missionButton).position;
        if (position === 'static') {
            missionButton.style.position = 'relative';
        }
        
        // 4E. Dodaj kropkę do przycisku
        missionButton.appendChild(badge);
        
        console.log("Dodano trwałą czerwoną kropkę do przycisku misji");
    }
    
    // 5. Usuń czerwoną kropkę
    function removeBadge() {
        const badges = document.querySelectorAll('.mission-badge-permanent');
        badges.forEach(badge => badge.remove());
    }
    
    // 6. Obserwuj zmiany w DOM, aby kropka nie zniknęła
    function setupMutationObserver() {
        // Obserwuj zmiany w całym ciele dokumentu
        const observer = new MutationObserver(function(mutations) {
            // Za każdym razem, gdy DOM się zmieni, sprawdź kropkę
            setTimeout(persistentBadgeCheck, 100);
        });
        
        // Rozpocznij obserwację z odpowiednimi opcjami
        observer.observe(document.body, { 
            childList: true,
            subtree: true 
        });
        
        console.log("Obserwator zmian w DOM uruchomiony");
    }
    
    // 7. Monitoruj nawigację między ekranami
    function monitorNavigation() {
        // Dodaj nasłuchiwanie kliknięć - szczególnie na przyciski nawigacyjne
        document.addEventListener('click', function(e) {
            const target = e.target.closest('button, a, .nav-button');
            if (!target) return;
            
            // Jeśli kliknięto przycisk nawigacyjny, sprawdź kropkę z opóźnieniem
            setTimeout(persistentBadgeCheck, 500);
            setTimeout(persistentBadgeCheck, 1000);
        });
        
        console.log("Monitorowanie nawigacji uruchomione");
    }
    
    // 8. Uruchom wszystkie mechanizmy trwałości
    // Najpierw sprawdź kropkę od razu
    persistentBadgeCheck();
    
    // Regularne sprawdzanie co 1 sekundę
    const badgeInterval = setInterval(persistentBadgeCheck, 1000);
    
    // Uruchom obserwator DOM
    setupMutationObserver();
    
    // Monitoruj nawigację
    monitorNavigation();
    
    // Dodaj funkcję do manualnego wymuszenia
    window.forceMissionBadgeUpdate = persistentBadgeCheck;
    
    console.log("System trwałej naprawy badge'a misji został w pełni aktywowany!");
})();

        })();
    }, 2000);
});
</script>



<!-- Okno modalne zmiany imienia ptaka -->
<div id="rename-modal">
    <div class="rename-content">
        <div class="rename-header" data-i18n="breeding.renameBird">Zmień imię ptaka</div>
        <div class="rename-cost">
            <span data-i18n="breeding.renameCostText">Koszt:</span>
            <span>100</span>
            <img src="assets/images/coin-icon.png" alt="BirdCoins">
        </div>
        <input type="text" class="rename-input" id="new-bird-name" maxlength="18" placeholder="" data-i18n-placeholder="breeding.enterNewName">
        <div class="rename-char-counter"><span id="name-char-count">0</span>/18</div>
        <div class="rename-buttons">
            <button class="rename-cancel" data-i18n="general.cancel">Anuluj</button>
            <button class="rename-confirm" data-i18n="general.confirm">Potwierdź</button>
        </div>
    </div>
</div>





</body>
</html>